<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>PallyCon Books</title>

    <link href="../stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="../stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
      <script src="../javascripts/all_nosearch.js" type="text/javascript"></script>

  </head>

  <body class="en en_index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <a href="#"> <img src="../images/logo.png" /></a>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='/slate/ko'>IN KOREAN</a></li>
            <li><a href='http://www.pallycon.com'>PALLYCON HOME</a></li>
        </ul>
      +-
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id='welcome'>Welcome</h1>
<p>This site provides information and guides for development using PallyCon products and service.</p>

<p>PallyCon service consists with cloud-based DRM license server, PallyCon Player for DRM content playback, and PallyCon Packager for content encryption. To use PallyCon service, each modules must be integrated with your content service. You can apply DRM without SDK development or server preparation.</p>

<p><img alt="overview" src="../images/overview_diagram_eng.jpg" /></p>
<h2 id='guides'>Guides</h2>
<p>You can integrate PallyCon service with your content service site using the below guide documents.</p>

<p><strong><a href="#quick-start-guide">Quick Start Guide</a> Provides test codes, samples and setup guide for a quick trial of PallyCon service.</strong> </p>

<p><strong><a href="#intergration-overview">Intergration Guides</a> Explains overall flow and how-to of the service integration.</strong> </p>

<ul>
<li><p>You must <a href="#packaging-guide">intergrate packager</a> to your CMS(Content Management System). And learn how to <a href="#license-issue-guide">issue license</a> with usage rights when end-user plays DRM content. </p></li>
<li><p>You can intergrate <a href="#mobile-player-guide">Pallycon Mobile Player</a> with your mobile content service site.</p></li>
<li><p>Also You can manage your Pallycon service via <a href="#rest-api-guide">ReST API</a>  </p></li>
</ul>
<h2 id='downloads'>Downloads</h2>
<p>For Quick Start, please download the below sample and refer to Quick Start Guide page.
For CMS integration, please download &lsquo;Packager&rsquo; which includes Application and CLI packager for Windows and Linux.</p>

<ul>
<li>Quick Start Sample Project <a href="http://www.pallycon.com/developer/PallyCon_QuickStartSample.zip">here</a></li>
<li>Packager <a href="http://www.pallycon.com/developer/PallyCon_Packager.zip">here</a></li>
</ul>

          <h1 id='quickstart-guide'>QuickStart Guide</h1><h2 id='introduction'>Introduction</h2>
<p><em>Quick Guide</em> is a guide about using the samples provided by PallyCon Service. You can see that a simple Web page can call PallyCon Mobile Player to play video streaming or download a video for local play. </p>

<p>You can download the sample at the following link.</p>

<p><i class="icon-folder-open"></i> <a href="http://www.pallycon.com/developer/PallyCon_QuickStartSample.zip">Sample Download</a></p>

<p>By applying these samples, you can understand which tasks are needed for applying PallyCon Service and how the service is provided. </p>
<h3 id='necessary-conditions'>Necessary Conditions</h3>
<p>In order to install the sample, run it, and perform a service query, you must complete <strong>Service Site Request</strong> after joining. If the service site is successfully requested, you can see the Site ID and Site Key of the service site, Packager Key, and the PC Web Player Key. </p>

<p>The sample pages are .jsp files. To modify or use these pages, you need Java and Tomcat. 
You must install Java Runtime Environment (JRE) that distributes and supports Java in Java 6 (1.6) and Java 7 (1.7) application and server environment.</p>

<p>You can download Java and Tomcat through the following links.</p>

<ul>
<li>Java: http://www.oracle.com/technetwork/java/javase/downloads/index.html</li>
<li>Tomcat: http://tomcat.apache.org/ </li>
</ul>
<h3 id='opening-the-setup-files'>Opening the Setup Files</h3>
<p>PallyCon_QuickStartSample.zip contains the below.</p>

<table><thead>
<tr>
<th>Folders or Files</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>sample.war</td>
<td>contains sample source codes</td>
</tr>
<tr>
<td>CloudApplicationPackager.zip</td>
<td>Cloud Application Packager file</td>
</tr>
</tbody></table>
<h4 id='sample-war-structure'>Sample.war Structure</h4>
<table><thead>
<tr>
<th>Folders or Files</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>/src/aes/</td>
<td>This folder contains aes256 and base64encode source sample files.</td>
</tr>
<tr>
<td>/images</td>
<td>This folder contains image related files used in the content_list.jsp page.</td>
</tr>
<tr>
<td>/js</td>
<td>This folder contains jquery related files used in the content_list.jsp page.</td>
</tr>
<tr>
<td>/WEB-INF/classes/aes/</td>
<td>aes256 class sample, base64encode class sample</td>
</tr>
<tr>
<td>/WEB-INF/lib</td>
<td>jar file required for sample</td>
</tr>
<tr>
<td>/ServiceSite/aes_ok.jsp</td>
<td>page file for encrypting parameters with aes256</td>
</tr>
<tr>
<td>/ServiceSite/service_manager.jsp</td>
<td>Service Site page file</td>
</tr>
<tr>
<td>/ServiceSite/service_manager_pc.jsp</td>
<td>PC Service Site page file(includes Bookmark, LMS management)</td>
</tr>
<tr>
<td>/ServiceSite/config.jsp</td>
<td>config file for running the trial</td>
</tr>
<tr>
<td>/ServiceSite/content_list.jsp</td>
<td>Mobile Web sample page file</td>
</tr>
<tr>
<td>/ServiceSite/content_list_pc.jsp</td>
<td>PC Web sample page file</td>
</tr>
<tr>
<td>/CIDIssue_RightsInfo/CIDIssue.jsp</td>
<td>CID issue page file</td>
</tr>
<tr>
<td>/CIDIssue_RightsInfo/ContentUsageRightsInfo.jsp</td>
<td>Content Usage Info page (Content Usage Info gateway) file</td>
</tr>
</tbody></table>
<h4 id='cloudapplicationpackager-zip-structure'>CloudApplicationPackager.zip Structure</h4>
<table><thead>
<tr>
<th>Folders or Files</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Bin/PallyCon_packager.exe</td>
<td>Application executable file</td>
</tr>
<tr>
<td>Bin/Setting.ini,images</td>
<td>Data files for application</td>
</tr>
<tr>
<td>Release_Note.txt</td>
<td>Application change logs</td>
</tr>
</tbody></table>
<h2 id='installation-and-contents-preparation'>Installation and Contents Preparation</h2>
<p>This document describes the process for developing a sample service using the sample files provided by PallyCon Service. </p>
<h3 id='installing-files-and-modifying-contents'>Installing Files and Modifying Contents</h3><h4 id='step1-copy-the-web-page-'>Step1: Copy the Web page.</h4>
<p>Decompress the sample file and <strong>copy the files in the Webcontents folder to $TOMCAT_HOME/webapp/ROOT/</strong>. </p>
<h4 id='step2-install-bouncycastle-jce-'>Step2: Install bouncycastle JCE.</h4><h5 id='aes256-configuration'>aes256 configuration</h5>
<p>Decompress the sample file and <strong>copy the files in the Webcontents folder to $TOMCAT_HOME/webapp/ROOT/.</strong><br>
<strong>You must have installed bouncycastle JCE to run the StringEncrypter.class among the attached class files.</strong></p>
<h5 id='content-usage-info-page'>Content Usage Info Page</h5>
<p>Set the information for using DRM-applied contents.
<strong>PallyCon Player(Mobile, PC) does not support content playback with count-limited license.</strong></p>

<table><thead>
<tr>
<th>License Rules</th>
<th>LIMIT</th>
<th>PD_START</th>
<th>PD_END</th>
<th>COUNT</th>
</tr>
</thead><tbody>
<tr>
<td><strong>Count System</strong></td>
<td>Y</td>
<td>Empty</td>
<td>Empty</td>
<td>Value greater than 0</td>
</tr>
<tr>
<td><strong>Period System</strong></td>
<td>Y</td>
<td>Date before PD_END</td>
<td>Date after PD_START</td>
<td>Empty</td>
</tr>
<tr>
<td><strong>Period System+Count System</strong></td>
<td>Y</td>
<td>Date before PD_END</td>
<td>Date after PD_START</td>
<td>Value greater than 0</td>
</tr>
<tr>
<td><strong>No Limit</strong></td>
<td>N</td>
<td>Empty</td>
<td>Empty</td>
<td>Empty</td>
</tr>
<tr>
<td>&mdash;&mdash;&mdash;&mdash;&mdash;</td>
<td>&mdash;-</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>

<p>Date: GMT (YYYY-MM-DDThh:mm:ss)</p>
<h5 id='content_list-configration'>content_list configration</h5>
<p>Set the information required for playing and downloading DRM contents. 
- <strong>sSite_ID:</strong> The site ID that has been issued in the PallyCon Admin page.
- <strong>sSite_Url:</strong> Current server IP and domain
- <strong>sContent_Url1:</strong> File name of the first content in the list
- <strong>sContent_Url2:</strong> File name of the second content in the list
- <strong>sContent_Url3:</strong> File name of the third content in the list</p>
<h4 id='step4-set-url-in-pallycon-cp-admin-'>Step4: Set URL in PallyCon CP Admin.</h4>
<p>Set the URL of CIDIssue.jsp to the Content ID Issue Page URL in PallyCon CP Admin, and set the URL of ContentUsageRightsInfo.jsp to the Content Usage Rights Info Page URL. </p>

<ul>
<li>URL of CIDIssue.jsp: <a href="http://IP:8080/sample/CIDIssue_RightsInfo/CIDIssue.jsp">http://IP:8080/sample/CIDIssue_RightsInfo/CIDIssue.jsp</a></li>
<li>URL of ContentUsageRightsInfo.jsp: <a href="http://IP:8080/sample/CIDIssue_RightsInfo/ContentUsageRightsInfo.jsp">http://IP:8080/sample/CIDIssue_RightsInfo/ContentUsageRightsInfo.jsp</a></li>
</ul>
<h3 id='packaging-and-preparing-drm-contents'>Packaging and Preparing DRM contents</h3>
<p>You can use Packager to encrypt source contents and package them to an .ncg file.</p>
<h4 id='step1-run-packager-'>Step1: Run Packager.</h4>
<ol>
<li>Decompress the attached packager.zip file.</li>
<li>Run the NCG_Packager_Cloud.exe file.</li>
</ol>
<h4 id='step2-set-packager-'>Step2: Set Packager.</h4>
<p>Enter the Site Key and Packager Key that you can check in PallyCon CP Admin.</p>

<p><img alt="packaging" src="../images/Packaging_Setting-Packaging.png" /> </p>
<h4 id='step3-run-packaging-'>Step3: Run packaging.</h4>
<p>Select three MP4 files to test and click the start packaging button to package the files.(<em>Click Button marked NO.8</em>)</p>

<p><img alt="apppackager" src="../images/Packaging_CloudApplicationPackager_Main.png" /> </p>
<h4 id='step4--set-the-contents-file-that-has-been-packaged-'>Step4. Set the contents file that has been packaged.</h4>
<p>When packaging is completed, the source contents (MP4) are changed to DRM contents (NCG). </p>

<ol>
<li>Store the DRM contents in <code class="prettyprint">/$TOMCAT_HOME/webapp/ROOT/ServiceSite/cont</code>.</li>
<li><strong>Change the sContent_url1, 2, and 3 values of config.jsp</strong> using the URL information of the corresponding contents.</li>
</ol>
<h2 id='running'>Running</h2><h3 id='install-pallycon-mobile-player'>Install PallyCon Mobile Player</h3>
<p>You can install PallyCon Mobile Player through App Store or Google Play. </p>

<p><a href="https://itunes.apple.com/kr/app/pallycon-player/id918473490?mt=8"><img src="../images/appstore_logo.png" width="200"></a>
<a href="https://play.google.com/store/apps/details?id=com.inka.pallycon.pallyconplayer"><img src="../images/google_play_logo.png" width="200"></a></p>
<h3 id='streaming-downloading-and-local-playback'>Streaming, Downloading, and Local Playback</h3>
<p>You can run PallyCon Mobile Player by calling it from Web browser. </p>
<h4 id='streaming'>Streaming</h4>
<p>When you touch the Play button in the Mobile Web sample page, PallyCon Mobile Player is called and streaming begins. </p>
<h4 id='download'>Download</h4>
<p>When you touch the Download button in the Mobile Web sample page, PallyCon Mobile Player is called and download starts. </p>
<h4 id='local-playback'>Local playback</h4>
<p>You can see the downloaded DRM content in the list. When you touch a desired content in the list, local playback starts. </p>
<h3 id='checking-details-of-use'>Checking Details of Use:</h3>
<p>On the PallyConCPAdmin page, you can see information about the licenses that were issued during a simple test, as well as the registered devices and packaged contents. </p>

<aside class="success"><b>Important:</b> If you start with Starter, you can issue up to 100 licenses for free. To issue more licenses, you must change to a paid service. </aside>
<h2 id='revision-history'>Revision History</h2>
<p>This table describes the revisions of the Quick Guide.</p>

<table><thead>
<tr>
<th style="text-align: left">Date</th>
<th style="text-align: left">Detail</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">2014.08.28</td>
<td style="text-align: left">Quick Guide was created</td>
</tr>
</tbody></table>

          <h1 id='integration-guide'>Integration Guide</h1><h2 id='integraion-overview'>Integraion Overview</h2><h3 id='about-pallycon-service'>About PallyCon Service</h3>
<p>The PallyCon Service is provided to allow vendors to service secured (DRM) contents or source (non-DRM) contents that they have. </p>

<p><img alt="overview_building" src="../images/Overview_Building.png" /></p>

<p>The DRM solution used in PallyCon Service can be applied to all files. However, PallyCon Service only services video contents. To apply DRM to other types of files, you must implement it using the SDK. </p>

<p>PallyCon Service consists of &lsquo;Packaging&rsquo;, &#39;PallyCon Cloud Service Site&rsquo;, and &#39;Player&rsquo;. </p>

<ul>
<li>Packaging: Source contents are converted to DRM contents.- PallyCon Cloud Service Site: The information required for creating or servicing DRM contents is provided. </li>
<li>Player: This player plays DRM contents.</li>
</ul>

<p><img alt="overview_composition" src="../images/Overview_Composition.png" /></p>

<p>For packaging, PallyCon Service provides Packager. Furthermore, Player provides PC Web Player and Mobile (iOS, Android) Player. </p>

<p><img alt="overview_tool" src="../images/Overview_Tool.png" />&gt;</p>

<p>PallyCon Service must be provided by reflecting the service policy of the vendor. The service policy of the vendor is reflected as follows:</p>

<ul>
<li>The policy is reflected by <strong>assigning the ID of the DRM contents (CID, Content ID)</strong> in Packaging. The CID can be assigned <strong>by developing a CID issue page</strong> or <strong>by direct input</strong>. </li>
<li>The policy is reflected by <strong>determining the content usage information when the DRM contents are used in Player</strong> that services the DRM contents. The content usage information is composed of play period and play count which can be determined by <strong>developing the Content Usage Rights Info Page</strong>. </li>
<li>The policy is reflected by <strong>setting Player in line with the service policy</strong>. You can set the policy in Player by interconnecting the <strong>Service Site Page and the Player</strong>. </li>
</ul>

<p><img alt="overview_workingpage" src="../images/Overview_WorkingPage.png" /></p>
<h3 id='pallycon-service-scenario'>PallyCon Service Scenario</h3>
<p>This document explains the PallyCon Service Scenario through the content flow when a vendor services DRM contents.</p>
<h4 id='packaging'>Packaging</h4>
<p>The first thing to do for DRM service is packaging the source contents. Packaging is done by Packager. Packager receives a CID, creates a CEK, and then converts the source contents to DRM contents. When the conversion is completed, the CEK and the CID are sent to the PallyCon Cloud Service Site, which completes packaging. </p>

<aside class="notice">CEK (Content Encryption Key) is used to convert source contents to DRM contents or from DRM contents to source contents.  </aside>

<p>The converted DRM contents are uploaded to the download server (CDN) to prepare for service.  </p>
<h4 id='drm-service-through-player'>DRM Service through Player</h4>
<p>A license is required when a player is to use the DRM contents in the download server. License is created by the PallyCon Cloud Service Site and issued to the player. When a license is created, <em>the CID and CEK</em> which are stored in the PallyCon Cloud Service Site and <em>the content usage information</em> in the Content Usage Info Page are used.</p>

<p>Upon receiving a license, the client converts the DRM contents to the source contents before using them. </p>
<h3 id='pallycon-service-building-scenario'>PallyCon Service Building Scenario</h3>
<p>The PallyCon Service must be set up in the following squence. </p>

<aside class="notice">You must have a site ID before setting up the PallyCon Service. You can manage site IDs in CP Admin. 
You can set up only one PallyCon Service for one site ID. You may not set up multiple PallyCon Services with one site ID. </aside>

<p><strong>STEP1:</strong> Select Packager to prepare for packaging.<br>
<strong>STEP2:</strong> Develop the Content ID Issue Page and register the URL in CP Admin.<br>
<strong>STEP3:</strong> Package the source contents.<br>
<strong>STEP4:</strong> Upload the packaged DRM contents to the donwload server.<br>
<strong>STEP5:</strong> Develop the Content Usage Rights Info Page and register the URL in CP Admin.<br>
<strong>STEP6:</strong> Develop the Service Site for linking with the player.<br>
<strong>STEP7:</strong> Start the service. </p>

<p>PallyCon Service provides the Guide documents for the setting up procedure. </p>
<h4 id='packaging-guide'>Packaging Guide</h4>
<p>This guide is for <strong>STEP1 ~ STEP4</strong>. This guide document describes the packaging method, the CID issue page development procedure, and cautions. </p>

<p><img alt="overview_packagingguide" src="../images/Overview_PackagingGuide.png" /></p>
<h4 id='license-issue-guide'>License Issue Guide</h4>
<p>This guide is for <strong>STEP5</strong>. This guide document provides information and cautions about the license required for using DRM contents, the creation and issuance of license, and the development of the content usage information page. </p>

<p><img alt="overview_licenseissueguide" src="../images/Overview_LicenseIssueGuide.png" /></p>
<h4 id='web-working-guide-mobile-working-guide'>Web Working Guide, Mobile Working Guide</h4>
<p>This guide is for <strong>STEP6</strong>. This guide document explains the interconnection tasks required for using Web Player and Mobile Player provided by PallyCon Service. </p>

<p><img alt="overview_playerworking" src="../images/Overview_PlayerWorkingGuide.png" /></p>
<h3 id='revision-history'>Revision History</h3>
<p>This table describes the revisions of the Overview Guide.</p>

<table><thead>
<tr>
<th style="text-align: left">Date</th>
<th style="text-align: left">Detail</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">2014.08.27</td>
<td style="text-align: left">Overview Guide was created</td>
</tr>
</tbody></table>
<h2 id='packaging-guide'>Packaging Guide</h2><h3 id='introduction'>Introduction</h3>
<p>This document is a guide for <strong>adding DRM contents to the CMS(Contents Manager System) which is the first task for starting a DRM service by a vendor</strong>. </p>
<h4 id='drm-packaging'>DRM Packaging</h4>
<p>To provide a DRM service, the vendor must add the DRM contents to their Contents Manager System (CMS). <strong>You can obtain DRM contents by converting (packaging) source contents to CRM contents.</strong></p>

<p><strong>You need Packager to convert source contents to DRM contents</strong>. The PallyCon Cloud Service Site provides <strong>Cloud Application Packager</strong> and <strong>Cloud CLI Packager</strong> for packaging. </p>

<p><i class="icon-folder-open"></i> <a href="http://www.pallycon.com/developer/PallyCon_Packager.zip">Packager Download</a></p>

<ul>
<li>Cloud Application Packager : This packager is an application with UI. This program is provided as an application and can be used only in Windows. </li>
<li>Cloud CLI Packager : This Cloud <strong>CLI</strong>(Commend Line Interface) Packager is provided for interconnection with the CMS solution of the vendor. It can be used in Windows and Linux. </li>
</ul>
<h4 id='use-of-this-document'>Use of this Document</h4>
<p>This document describes the <strong>Packaging/DRM Service Scenario</strong> and <strong>how to use Packager</strong> for applying DRM to source files. </p>

<p>This description allows you to:</p>

<ul>
<li>understand the cautions about packaging </li>
<li>get useful information for managing DRM contents, and </li>
<li>better understand the entire DRM service scenario of a vendor as well as the service scenario of a player. </li>
</ul>
<h4 id='necessary-conditions'>Necessary Conditions</h4>
<p>Before starting this task, developers must have: </p>

<ul>
<li><strong>site ID</strong>, <strong>packager key</strong>, and <strong>site key</strong> issued from the PallyCon Service Site.</li>
<li>understanding of the total flow of the PallyCon Service by reading the Quick Start Guide.</li>
<li>knowledge and application techniques for HTTP(s) communication and AES encryption which are required for development. </li>
</ul>
<h4 id='application-procedure'>Application Procedure</h4>
<p><strong>STEP1:</strong> Carefully read this document at least once in order to learn about Packager. </p>

<p><strong>STEP2:</strong> Determine the Content ID (CID) creation policy.</p>

<p><strong>STEP3:</strong> Select the CID issuing method between direct input of CID and linking with the CID issue page.   </p>

<p><em>[CASE1: Select the direct input of CID - Only possible with Cloud CLI Packager.]</em></p>

<p><strong>STEP4:</strong> Develop the interconnection with the Cloud CLI Packager so that CIDs will be inputted to the CMS solution. </p>

<p><em>[CASE2: Select linking with the CID issue page - Possible with both Cloud CLI Packager and Cloud Application Packager.]</em> </p>

<p><strong>STEP4:</strong> Develop the CID issue page in accordance with the CID issue interconnection standard in this document.</p>

<p><strong>STEP5:</strong> Register the CID issue page address as the Content ID Issue URL of CP Admin.        </p>

<p><strong>STEP6-Cloud CLI Packager</strong>
:  Develop the interconnection with the Cloud CLI Packager so that CIDs will not be inputted to the CMS solution. </p>

<p><strong>STEP6-Cloud Application Packager</strong><br>
 <strong>STEP6-1:</strong> Run Cloud Application Packager.<br>
 <strong>STEP6-2:</strong> Enter the site ID and packager key in the Environment Settings Window.<br>
 <strong>STEP6-3:</strong> Enter the file path for packaging and start Packaging.<br>
 <strong>STEP6-4:</strong> Upload the packaged DRM contents to the download server.  </p>
<h3 id='scenario'>Scenario</h3>
<p>This document describes the source contents packaging scenario and how the packaged DRM contents are serviced. </p>

<p>By reading this description, you will understand the importance of content ID (CID), how CID and CEK are generated, and where they are used. </p>

<aside class="notice">CEK (Content Encryption Key): This key is used for packaging/un-packaging DRM contents. </aside>
 
<h4 id='packaging-scenario'>Packaging Scenario</h4>
<p>Packaging scenario varies by whether the CID is directly inputted or issued from the content ID issue page. 
Both packagers used for packaging receives the input of Site ID, Packager Key, Source Path, and Destination Path. For the Cloud CLI Packager, you can directly input the CID. </p>

<ul>
<li><em>Site ID, Packager Key:</em> These values are used when authorizing the used Packager in the PallyCon Cloud Service Site. </li>
<li><em>Source Path:</em> This is the path of the source contents. </li>
<li><em>Destination Path:</em> This is the path of the packaged DRM contents. </li>
</ul>

<p>The CID that is directly entered by a vendor or issued on the Content ID Issue page is 28 bytes long. This Content ID is combined with the Site ID that is entered by the vendor on the PallyCon Service Site, and the content ID used for packaging becomes 32 bytes long. </p>
<h5 id='emcontent-id-conversionem'><em>Content ID Conversion</em></h5>
<ul>
<li>User input: <em>Content ID (28 byte)</em></li>
<li>PallyCon Cloud Service Site:  Content ID (28 byte) + Site ID (4 byte) = <em>Content ID (32 byte)</em></li>
<li>Content ID used for packaging: <em>Content ID (32 byte)</em></li>
</ul>
<h5 id='direct-input-of-cid-contents-id'>Direct Input of CID (Contents ID)</h5>
<p>Only Cloud CLI Packager has the CID interface for receiving the input of CID.  </p>

<p><img alt="Packaging_Packaging_CID" src="../images/Packaging_Packaging_CID.png" /></p>

<p>When <strong>a CID is inputted in Cloud CLI Packager, the Packager checks if the PallyCon Cloud Service Site has the CID</strong>. </p>

<p>The PallyCon Cloud Service Site certifies Packager and Site ID. If the certification is successful, the 28 byte Content ID is combined with the Site ID to generate a 32 byte Content ID. The same CID as the 32 byte CID is searched in the PallyCon Cloud Service Site. If the same CID exists, the CEK corresponding to the CID is searched in the Pallycon Cloud Service Site and sent to the Packager together with the CID. If the CEK does not exist, only the CID is sent. </p>

<p>If there is no CEK in the data received from the PallyCon Cloud Service Site, the Packager creates the CEK. Then, it <strong>starts to convert the source contents in the source path to DRM contents using the CEK and CID</strong>. </p>

<p>Once the conversion is completed, <strong>DRM contents are created in the destination path</strong> and <strong>the Packager sends the CID and CEK to the PallyCon Cloud Service Site</strong>. </p>

<aside class="notice">Vendors cannot directly enter or manage CEKs because they are internally created and managed. Furthermore, other steps than the data input in Packager are automatically processed by Packager.</aside>
<h5 id='issuing-cid-through-the-cid-issue-page'>Issuing CID through the CID Issue Page</h5>
<p>*<em>If no CID is inputted to the CID interface in Cloud CLI Packager, or if Cloud Application Packager is used, you must issue the CID from the CID issue page. *</em></p>

<p><img alt="Packaging_Packaging_NoCID" src="../images/Packaging_Packaging_NoCID.png" /></p>

<p>Packager <strong>requests the issuance of CID from the PallyCon Cloud Service Site</strong> and <strong>the PallyCon Cloud Service Site requests the issuance of CID from the CID issue page of the Content ID Issue Page URL</strong>. <strong>The CID Issue Page creates a CID(28-byte) and sends it to the PallyCon Cloud Service Site</strong>. </p>

<p>The steps after this are identical to the steps for direct input of CID. </p>

<aside class="notice">Other steps than the data input in Packager and the CID issue page are automatically processed by Packager.</aside>
<h4 id='drm-content-amp-service-scenario'>DRM Content &amp; Service Scenario</h4><h5 id='drm-content'>DRM Content</h5>
<p>All contents can be packaged to DRM contents. </p>

<p>In general, the source files are directly packaged, but for HLS contents, the HLS keys are packaged. </p>

<p>To package HLS contents, you must convert them to general HSL files in the first step. You must use a tool that provides the <strong>&#39;Simple Encryption&rsquo; option of the Segment Tool</strong>. When you create a TS file using this option, an HLS key for decoding the encoded TS file is created in addition to the TS file and a M3U8 file. This HLS key is packaged with Packager. </p>

<p>The following figure illustrates the preparation of DRM contents for HLS service. </p>

<p><img alt="Packaging_Scenario_HSL" src="../images/Packaging_Scenario_HSL.png" /></p>
<h5 id='service-scenario'>Service Scenario</h5>
<p><strong>License is required</strong> for servicing DRM contents. License contains the <strong>Content ID</strong> and <strong>CEK</strong> of DRM contents, as well as the <strong>content usage period and count</strong>. </p>

<p><img alt="Packaging_Scenario_License" src="../images/Packaging_Scenario_License.png" /></p>

<p><strong>Licenses are issued from the PallyCon Cloud Service Site.</strong> To issue a license, you need user, device, and content information. Among them, the content contains the CID(32-byte, <em>including the site ID</em>) extracted from the DRM contents. </p>

<aside class="notice">Content Usage Rights Info Page: In addition to the CID issue page, this page must be developed by developer and show the content usage rights information. </aside>

<p><img alt="Packaging_Scenario_DRMService" src="../images/Packaging_Scenario_DRMService.png" /></p>

<p>When a user attempts to use DRM contents, Player <strong>extracts the content ID from DRM contents</strong>. Furthermore, it also <strong>extracts device and user information and other content information</strong> and sends the data for requesting a license to the PallyCon Cloud Service Site together with the CID(32-byte). </p>

<p>The PallyCon Cloud Service Site uses the user and device information contained in this data and <strong>determines whether it is possible to issue a license</strong>. If possible, it <strong>delivers the request data for content usage information (usage period and count) to the Content Usage Rights Info Page</strong> including the CID(32-byte), content information, and user information. </p>

<p>The Content Usage Rights Info Page sends the <strong>content usage rights information to the PallyCon Cloud Service Site</strong> in accordance with the request data. The PallyCon Cloud Service Site <strong>extracts the CEK</strong> in line with the CID(32-byte). <strong>The CEK is used together with the content usage information to generate a license, and the license is sent to the client</strong>. </p>

<p>The client <strong>determines whether the DRM content can be used using the issued license. If it can be used, the client unpacks the DRM content to the original content using the CEK</strong>.   </p>
<h3 id='content-id-policy'>Content ID Policy</h3>
<p><strong>Content IDs are linked to Licenses one to one</strong>. Therefore, <strong>depending on the CID setting when packaging contents, you can manage multiple contents with one license, or manage each content with a different license.</strong></p>

<p><img alt="Packaging_CID_1vs1" src="../images/Packaging_CID_1vs1.png" /></p>

<p>If you service multiple contents as a group, it is more effective to manage them with one lincense rather than to manage each content with a different license. To manage multiple contents with one license, use the same CID for the contents to be grouped when packging contents. </p>

<p><img alt="Packaging_CID_Package" src="../images/Packaging_CID_Package.png" /></p>

<p>If you service each content separately, you must manage each content with a different license. In this case, use a different CID for each content when packaging contents.</p>

<p><img alt="Packaging_CID_NoPackage" src="../images/Packaging_CID_NoPackage.png" /></p>
<h3 id='content-id-issue-page'>Content ID Issue Page</h3>
<p>This document describes the protocol and standard for developing the CID Issue Page when receiving CID by communicating with the CID Issue Page rather than directly inputting the CID.   </p>
<h4 id='https-protocol-post-method-requestresponse-data'>Http(s) Protocol (POST Method, REQUEST/RESPONSE Data)</h4>
<p>Through the development of the CID Issue Page, developers must create a content ID (CID, 28-byte) in line with the data requested by Cloud CLI Packager or Cloud Application Packager.</p>
<h5 id='request-data'>REQUEST DATA</h5><h6 id='details'>Details</h6>
<p>These data must be parsed in the CID Issue Page. 
<code class="prettyprint">http(s)://ContentIDIssuePageURL&amp;data=Base64Encoding(AES256Encyption(XML DATA))String</code></p>

<p><em>Format</em></p>

<ul>
<li>Use the UTF-8 String Encoding<br></li>
<li>POST Method </li>
<li>URL: http(s)://Content ID Issue Page URL </li>
<li>Body
<strong>Parameter :</strong> <em>data</em> <strong>Value II:</strong> <em>XML DATA</em></li>
</ul>

<p><em>XML DATA</em></p>

<p>This data contains information about the contents to be packaged. This data is encrypted with <strong>AES256</strong>, and then encoded with Base64 again before being sent. </p>
<h6 id='xml-standards'>XML Standards</h6>
<p>The request data is sent from the PallyCon Cloud Service to the CID Issue Page with no empty value. </p>
<pre><code class="highlight xml"><span class="cp">&lt;?xml version='1.0' encoding='UTF-8'?&gt;</span>
<span class="nt">&lt;RES&gt;</span>
    <span class="nt">&lt;FILEPATH&gt;</span>C:\DATA\package_content_ori.mp4<span class="nt">&lt;/FILEPATH&gt;</span>
    <span class="nt">&lt;FILENAME&gt;</span>package_content_ori.mp4<span class="nt">&lt;/FILENAME&gt;</span>
    <span class="nt">&lt;NONCE&gt;</span>fdfe321xb74azv<span class="nt">&lt;/NONCE&gt;</span>
<span class="nt">&lt;/RES&gt;</span>
</code></pre>

<p><em>FILEPATH</em>
: This is the total path of the file sent from Packager.</p>

<p><em>FILENAME</em>
: This is the file name of the FilePath sent from Packager. </p>

<p><em>NONCE</em>
: This value is for validating the communication data from the PallyCon Cloud Service to the CID Issue Page.</p>
<h5 id='response-data'>RESPONSE DATA</h5><h6 id='details'>Details</h6>
<p>This data must be created in the CID Issue Page. 
<code class="prettyprint">Base64Encoding(AES256Encyption(XML DATA)) String</code></p>

<p><em>Format</em> </p>

<ul>
<li>Base64Encoding(AES256Encyption(XML DATA)) String<br></li>
<li>Use the UTF-8 String Encoding</li>
</ul>

<p><em>XML DATA</em></p>

<ul>
<li>Response to a request from the PallyCon Cloud Service</li>
</ul>
<h6 id='xml-standards'>XML Standards</h6><pre><code class="highlight xml">*[Successful issuance of CID]*
<span class="cp">&lt;?xml version='1.0' encoding='UTF-8'?&gt;</span>
<span class="nt">&lt;RES&gt;</span>
    <span class="nt">&lt;ERROR&gt;</span>0000<span class="nt">&lt;/ERROR&gt;</span>
    <span class="nt">&lt;CID&gt;</span>idd_32_gee<span class="nt">&lt;/CID&gt;</span>
    <span class="nt">&lt;NONCE&gt;</span>fdfe321xb74azv<span class="nt">&lt;/NONCE&gt;</span>
<span class="nt">&lt;/RES&gt;</span>
</code></pre>
<pre><code class="highlight xml">*[CID issuance failed]*
<span class="cp">&lt;?xml version='1.0' encoding='UTF-8'?&gt;</span>
<span class="nt">&lt;RES&gt;</span>
    <span class="nt">&lt;ERROR&gt;</span>0001<span class="nt">&lt;/ERROR&gt;</span>
    <span class="nt">&lt;ERRMSG&gt;</span>No Registered File<span class="nt">&lt;/ERRMSG&gt;</span>
    <span class="nt">&lt;NONCE&gt;</span>fdfe321xb74azv<span class="nt">&lt;/NONCE&gt;</span>
<span class="nt">&lt;/RES&gt;</span>
</code></pre>

<p><em>ERROR</em></p>

<p>: This is a defined error code, which is a required parameter. It must have a fixed length of 4 bytes and empty value is not allowed. If successful, this is set to <code class="prettyprint">0000</code> other values indicate failure.  </p>

<p><em>ERRORMSG</em></p>

<p>: This message is related to ERROR when the <code class="prettyprint">ERROR</code> value means failure. This is not a required parameter and empty value is allowed. Up to 255 types are allowed.</p>

<p><em>CID</em></p>

<p>: This CID is generated by the CID policy in the CID Issue Page and must be used in the event of success. Empty value is not allowed, and up to 28 bytes can be used. For CID, only English alphabets, numbers, and some special characters (&rsquo; _ &rsquo;, &rsquo; . &rsquo;) are allowed. </p>

<p><em>NONCE</em></p>

<p>: This is a required parameter that must be used to for validating the data for communicating between the PallyCon Cloud Service and the CID Issue Page. Empty value is not allowed, and <strong>the same value as the &#39;NONCE&rsquo; value in Request Data must be sent.</strong></p>
<h4 id='a-hrefhttpen-wikipedia-orgwikiadvanced_encryption_standardaes256a-encryptiondecryption'><a href="http://en.wikipedia.org/wiki/Advanced_Encryption_Standard">AES256</a>  Encryption/Decryption</h4>
<p>The communication data (REQUEST/RESPONSE DATA) between the Cloud Packager and the DRM server is protected by <a href="http://">AES256</a> encryption. </p>
<h6 id='details'>Details</h6>
<p><em>Algorithm</em></p>

<ul>
<li>Algorithm : AES<br></li>
<li>Keysize : 256 bit<br></li>
<li>Mode : CBC</li>
</ul>

<p><em>Key, Initial vector</em></p>

<ul>
<li>Key: 32 byte  (This can be checked in PallyCon CP Admin Page.)</li>
<li>Initial vector: 16 byte (a fixed value:  <strong>1234567890abcdef</strong>)</li>
</ul>

<p><em>Padding</em>
- <a href="http://en.wikipedia.org/wiki/PKCS">PKCS7</a> is used.</p>
<h3 id='how-to-use-cloud-application-packager'>How to Use Cloud Application Packager</h3><h4 id='installation'>Installation</h4>
<p>The Cloud Application Packager can be used right after decompressing the .zip file without any installation process.</p>

<p><strong><em>Bin folder</em></strong></p>

<ul>
<li>NCG_Packager.exe: Program execution file</li>
<li>Packager.key, Setting.ini, Image: Files required for running the program</li>
</ul>

<p><strong><em>Doc folder</em></strong></p>

<ul>
<li>NCG_Packager_Manual_Eng.doc: Program manual file</li>
</ul>

<p><strong><em>Release_Note.txt</em></strong></p>

<ul>
<li>Revisions that have been changed from the previous version</li>
</ul>
<h4 id='how-to-use'>How to Use</h4>
<p><strong>STEP1:</strong> Run the program by double-clicking NCG_Packager_Cloud.exe in the Bin folder.</p>

<p><strong>STEP2:</strong> Enter the site ID and packager key in the Settings window. (You can check them in PallyCon CP Admin.)</p>

<p><strong>STEP3:</strong> Set Packager in the Settings window. When you run the program first, the default values are set. </p>

<p><strong>STEP4:</strong> Set the destination path in the main window. </p>

<p><strong>STEP5:</strong> Set the source path (folder) in the main window to load the list of files to be packaged. </p>

<p><strong>STEP6:</strong> Click the &ldquo;Packaging&rdquo; button in the main window to start packaging. </p>
<h4 id='window-descriptions'>Window Descriptions</h4><h5 id='main-window'>Main window</h5>
<p><img alt="Packaging_CloudApplicationPackager_Main" src="../images/Packaging_CloudApplicationPackager_Main.png" /></p>

<p><em>(1) Input</em>
: This folder contains source video files that need to be packaged. </p>

<p><em>(2) Ouput</em>
: After packaging, the packed files are stored in this folder.</p>

<p><em>(3) Input Folder</em>
: You can specify the folder in Explorer by pressing this button.</p>

<p><em>(4) Output Folder</em>
: This button can be used only if the Pack type in Settings is Batch.<br>
: You can specify the folder in Explorer by pressing this button.<br>
: When the folder is changed, the file list is initialized.  </p>

<p><em>(5) Add Input Folder</em>
: This button can be used only if the Pack type in Settings is Unit.<br>
: You can add continuously desired folders without specifying any folder.</p>

<p><em>(6) Add Input False</em>
: This button can be used only if the Pack type in Settings is Batch.<br>
: You can continuously add unit files.</p>

<p><em>(7) Settings</em>
: The Settings window appears.</p>

<p><em>(8) Packaging</em>
: The files in the list are packaged.</p>

<p><em>(9) File List</em>
: This list has two columns: File Name Column and Result Column. </p>

<ul>
<li><p><strong>File Name Column</strong><br>
This is the list of files to be packaged. This list can be specified as input folder.
You can add an input folder with Add Input Folder.
If there is any file in the list that you don&rsquo;t want to package, you can delete the file by clicking it and pressing the Delete key. You can also delete multiple files in the list.</p></li>
<li><p><strong>Result Column</strong> 
<strong>Ready:</strong> This appears before packaging.
<strong>Success:</strong> This appears when packaging is successful. 
<strong>Fail:</strong> This appears when packaging fails.</p></li>
</ul>

<p><em>(10) Log List</em>
: This list has two columns: Log Type Column and Contents Column. </p>

<ul>
<li><p><strong>Log Type Column</strong><br>
<strong>Error:</strong> This appears when an unexpected error occurs during packaging.<br>
<strong>Work:</strong> The normal work situations during packaging are recorded.<br>
<strong>Settings:</strong> Information about environment settings is recorded.  </p></li>
<li><p><strong>Contents Column</strong><br>
<strong>Work:</strong> &rsquo;[Work File Name] + Work Result&rsquo; is displayed.<br>
<strong>Error:</strong> &rsquo;[Work File Name] + Work Failed Location + Code Number&rsquo; is displayed. When an error actually occurs, these logs are automatically saved in a file, and the log file must be sent to Help Desk for analysis.<br>
<strong>Settings:</strong> Settings at the time of packaging are shown.<br>
<strong>Result:</strong> The Total, Success, and Fail counts agree with the Result Column in the File List window. The packaging results are summarized.</p></li>
</ul>
<h5 id='settings-window'>Settings window</h5>
<p>The top of the Settings window is divided into &#39;Common&rsquo; section and &#39;Packaging&rsquo; section. </p>

<p><img alt="Packaging_Setting-Common" src="../images/Packaging_Setting-Common.png" /></p>

<p><em>(1) Packaging Type</em></p>

<p><strong>Batch Pack:</strong> This is a batch job and only one folder can be specified with the Input Folder button. However, the output folder is created with the same subfolder structure. If a different folder is specified, the list in File List disappears.</p>

<p><strong>Unit Pack:</strong> You can continuously add a folder to be packaged through the Add Input Folder button as individual job. However the subfolder cannot be maintained in the output folder.
You can also continuously add individual files with the Add Input File button.</p>

<p><img alt="Packaging_Setting-Packaging" src="../images/Packaging_Setting-Packaging.png" /></p>

<p><em>(1) Supported Extensions</em>
: This shows the list of supported extensions. When you try to add a file using Input Folder in the main window, files of unsupported extensions cannot be added. You can add or delete extensions using the Add and Remove buttons.</p>

<p><em>(2) Integration Info</em>
- <strong>Site ID:</strong> This is the site ID issued in PallyCon CP Admin.
- <strong>Packager Key:</strong> This is the Packager Key issued in PallyCon CP Admin.</p>
<h5 id='progress-bar-window'>Progress Bar window</h5>
<p><img alt="Packaging_CloudApplicationPackager_ProgressBar" src="../images/Packaging_CloudApplicationPackager_ProgressBar.png" /></p>

<p><em>(1) File Name</em>
: This shows the name of the file that is being processed in real time.</p>

<p><em>(2) Timer</em>
: The total time that has progressed. Paused time is excluded.</p>

<p><em>(3) Percentage</em>
: This shows the packaging progress rate of one file.</p>

<p><em>(4) Total Number</em>
: The total number of files to be packaged and the number of files that have been completed are shown.</p>

<p><em>(5) Pause &amp; Cancel</em>
: You can pause during a job, and this time is not added. You can restart the job by pressing the Continue button. Furthermore, you can press the Cancel button to cancel the job. Because a job is cancelled in file unit, the job stops after the currently working file is completed.</p>
<h4 id='log-analysis'>Log Analysis</h4>
<p>Log File location: The log file is <strong>automatically created as &#39;execution folder/LogList_mmddhhmm.txt&rsquo;</strong> where &#39;mm = month , dd = day , hh = hours , and mm = minutes&rsquo; mean.</p>
<h3 id='how-to-use-cloud-cli-packager'>How to Use Cloud CLI Packager</h3><h4 id='checking-cloud-cli-packager'>Checking Cloud CLI Packager</h4>
<ul>
<li>  Receive the Cloud CLI Packager file through the PallyCon Service Site.</li>
<li>  When you decompress the file, the following folder appear (<strong>Linux_CentOS, Linux_Ubuntu, Windows</strong>)</li>
<li>   Two folders (<strong>bin, doc</strong>) and one file (<strong>ReleaseNote.txt</strong>) are in each folders.</li>
<li>  <em><strong>Windows:</strong></em> The ncgpackager.exe file in the bin folder is the command line packager.</li>
<li>  <em><strong>Linux:</strong></em> Elevation of privilege should be needed. 

<ul>
<li>  <strong>chmod 775 &ldquo;filename&rdquo;</strong></li>
</ul></li>
</ul>
<h4 id='input--output-standards'>Input / Output Standards</h4><h5 id='input'>Input</h5>
<p><em>Format</em><br>
<code class="prettyprint">ncgpackager pack Site_ID Packager_Key &quot;SourceFilePath&quot; &quot;DestinationFilePath&quot; (Content_ID)</code></p>
<pre><code class="highlight shell">// When cid is entered
ncgpackager pack F001 FVJDp2LT2Xr0f4Di18z6lzv3DKvNOP20  <span class="s2">"d:</span><span class="se">\c</span><span class="s2">ontent</span><span class="se">\O</span><span class="s2">T.mp4"</span> <span class="s2">"d:</span><span class="se">\N</span><span class="s2">CGcontent</span><span class="se">\O</span><span class="s2">T.mp4.ncg"</span> 

// When cid is not entered
ncgpackager pack F001 FVJDp2LT2Xr0f4Di18z6lzv3DKvNOP20  <span class="s2">"d:</span><span class="se">\c</span><span class="s2">ontent</span><span class="se">\O</span><span class="s2">T.mp4"</span> <span class="s2">"d:</span><span class="se">\N</span><span class="s2">CGcontent</span><span class="se">\O</span><span class="s2">T.mp4.ncg"</span> 1234
</code></pre>

<p><em>pack</em>
: This fixed 4 byte value means to perform packaging of the contents. Use only small letters.</p>

<p><em>Site_ID, Packager_Key</em>
: This value is assigned in the PallyCon Cloud Service Site. </p>

<p><em>SourceFilePath, DestinationFilePath</em>
: These are the total path of the source file and the total path (the absolute path) of the DRM file creation. If there is a space, it must be enclosed by &ldquo;&rdquo;. </p>

<p><em>Content_ID</em>
: This is the Content ID. If you enter it directly, it must be entered at the end. Its length must be 32 bytes or less and only English alphabets, numbers, and some special characters ( &rsquo;, &rsquo; , &rsquo; _ &rsquo; ) can be used. </p>
<h5 id='output'>Output</h5><pre><code class="highlight xml">**Success**
<span class="cp">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span>
<span class="nt">&lt;ncgpackager&gt;</span>
<span class="nt">&lt;RESULT&gt;</span>0<span class="nt">&lt;/RESULT&gt;</span>
<span class="nt">&lt;ERRORMSG&gt;</span>Success<span class="nt">&lt;/ERRORMSG&gt;</span>
<span class="nt">&lt;SRCFILE&gt;</span>d:\content\20140814\OT.mp4<span class="nt">&lt;/SRCFILE&gt;</span>
<span class="nt">&lt;DSTFILE&gt;</span>d:\NCGcontent\20140814\OT.mp4.ncg<span class="nt">&lt;/DSTFILE&gt;</span>
<span class="nt">&lt;ELAPSETIME&gt;</span>1.95000<span class="nt">&lt;/ELAPSETIME&gt;</span>
<span class="nt">&lt;CID&gt;</span>1234<span class="nt">&lt;/CID&gt;</span>
<span class="nt">&lt;/ncgpackager&gt;</span>
</code></pre>
<pre><code class="highlight xml">**Failed (Local Error)**
<span class="cp">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span>
<span class="nt">&lt;ncgpackager&gt;</span>
<span class="nt">&lt;RESULT&gt;</span>1202<span class="nt">&lt;/RESULT&gt;</span>
<span class="nt">&lt;ERRORMSG&gt;</span>Source File is not found<span class="nt">&lt;/ERRORMSG&gt;</span>
<span class="nt">&lt;SRCFILE&gt;</span>d:\content\2014-08-14\OT.mp4<span class="nt">&lt;/SRCFILE&gt;</span>
<span class="nt">&lt;DSTFILE&gt;</span>d:\NCGcontent\2014-08-14\OT.mp4.ncg<span class="nt">&lt;/DSTFILE&gt;</span>
<span class="nt">&lt;/ncgpackager&gt;</span>
</code></pre>

<p><em>RESULT</em>
: Required  Packaging result code value, Success – 0 / Fail – Error Code</p>

<p><em>ERRORMSG</em>
: Required  Message corresponding to RESULT</p>

<p><em>SRCFILE</em>
: App Error The path set for the source file</p>

<p><em>DSTFILE</em>
: App Error The path of DestFile</p>

<p><em>ELAPSETIME</em>
: Success   Elapsed time for packaging</p>

<p><em>CID</em>
: Success   Content ID(32-byte) inputted in the content header</p>
<h4 id='error-code'>Error Code</h4>
<table><thead>
<tr>
<th>Error Code</th>
<th>Error Location</th>
<th>Explanation</th>
</tr>
</thead><tbody>
<tr>
<td><strong>0</strong></td>
<td>SUCCESS</td>
<td>Success</td>
</tr>
<tr>
<td><strong>1101</strong></td>
<td>PARAM</td>
<td>No parameter after the execution command is delivered.</td>
</tr>
<tr>
<td><strong>1102</strong></td>
<td>PARAM</td>
<td>The parameter after the execution command is not pack.</td>
</tr>
<tr>
<td><strong>1103</strong></td>
<td>PARAM</td>
<td>The number of parameters after the execution command is not correct.</td>
</tr>
<tr>
<td><strong>1202</strong></td>
<td>FILE</td>
<td>The source file is not located in the specified path.</td>
</tr>
<tr>
<td><strong>1204</strong></td>
<td>FILE</td>
<td>The source file cannot be accessed (permission / file name problem).</td>
</tr>
<tr>
<td><strong>1205</strong></td>
<td>FILE</td>
<td>Failed to create the NCG file (permission / file name problem).</td>
</tr>
<tr>
<td><strong>1206</strong></td>
<td>FILE</td>
<td>Failed to create a folder that does not exist in the folders specified in the path (permission / file name problem).</td>
</tr>
<tr>
<td><strong>1210</strong></td>
<td>FILE</td>
<td>App failed to receive a buffer allocated (memory acquisition / rebooting).</td>
</tr>
<tr>
<td><strong>1301</strong></td>
<td>PACK</td>
<td>CID is empty.</td>
</tr>
<tr>
<td><strong>1302</strong></td>
<td>PACK</td>
<td>CEK is empty.</td>
</tr>
<tr>
<td><strong>2001</strong></td>
<td>NETWORK</td>
<td>Networks Error(check ErrorMessage)</td>
</tr>
<tr>
<td><strong>100XX</strong></td>
<td>WINDOWS</td>
<td>Failed to create a window socket (retry / rebooting)</td>
</tr>
<tr>
<td><strong>OTHER</strong></td>
<td></td>
<td>Unknown error</td>
</tr>
</tbody></table>
<h3 id='revision-history'>Revision History</h3>
<p>This table describes the revisions of the PallyCon Packaging Guide.</p>

<table><thead>
<tr>
<th style="text-align: left">Date</th>
<th style="text-align: left">Detail</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">2014.08.24</td>
<td style="text-align: left">PallyCon Packaging Guide was created</td>
</tr>
</tbody></table>
<h2 id='license-issue-guide'>License Issue Guide</h2><h3 id='introduction'>Introduction</h3>
<p>License is required for servicing DRM contents. This document describes information required for issuing license.</p>
<h4 id='license'>License</h4>
<p>License contains <strong>the content IDs and CEKs of DRM contents, the service term and usage count of contents</strong>. It is generated in the PallyCon Cloud Service Site and issued to clients. </p>

<p><img alt="Packaging_Scenario_License" src="../images/Packaging_Scenario_License.png" /></p>

<p>Therefore, developers do not have to write codes for license issuance. Developers just need to write a page for retrieving the <strong>content usage information</strong> for the PallyCon Cloud Service Site to generate a license. </p>
<h4 id='use-of-this-document'>Use of this Document</h4>
<p>This document describes <strong>the license issuing process and the procedure for setting the content usage information required for license issuance</strong>. </p>

<p>This description allows you to:</p>

<ul>
<li>understand the cautions when issuing a license, and </li>
<li>get ideas about various setting methods for license information.</li>
</ul>
<h4 id='necessary-conditions'>Necessary Conditions</h4>
<p>Before starting this task, developers must have the following:</p>

<ul>
<li>DRM contents to service, and</li>
<li>knowledge and application techniques for HTTP(s) communication and AES encryption which are required for development.</li>
</ul>
<h4 id='working-procedure'>Working Procedure</h4>
<p><strong>STEP1:</strong> Carefully read this document at least once in order to learn about license issuance. </p>

<p><strong>STEP2:</strong> Decide a policy for setting Content Usage Rights Info. </p>

<p><strong>STEP3:</strong> Develop the Content Usage Rights Info Page in accordance with the content usage information standard in this document. </p>

<p><strong>STEP4:</strong> Register the content usage Info Page address as the Content Usage Rights Info URL of PallyCon CP Admin.</p>
<h3 id='scenario'>Scenario</h3><h4 id='license-issue-scenario'>License Issue Scenario</h4>
<p><img alt="Packaging_Scenario_DRMService" src="../images/Packaging_Scenario_DRMService.png" /></p>

<p>When a user attempts to use DRM contents, Player <strong>extracts the content ID(32-byte) from the DRM contents</strong>. Furthermore, it also <strong>extracts device and user information and other content information</strong> and sends the data for requesting a license to the PallyCon Cloud Service Site together with the CID. </p>

<p>The PallyCon Cloud Service Site uses the user and device information contained in this data and <strong>determines whether it is possible to issue a license</strong>. If possible, it <strong>delivers the request data for content usage information (usage period and count) to the Content Usage Rights Info Page</strong> including the CID, content information, and user information. </p>

<aside class="notice">Content Usage Rights Info Page (_red box in the figure_): In addition to the CID issue page, this page must be developed by developer and show the content usage rights information. </aside>

<p>The Content Usage Info Page sends the <strong>content usage information to the PallyCon Cloud Service Site</strong> in accordance with the request data. The PallyCon Cloud Service Site <strong>extracts the CEK</strong> in line with the CID. <strong>The CEK is used together with the content usage information to generate a license, and the license is sent to the player</strong>. </p>

<p>The player <strong>determines whether the DRM content can be used using the issued license. If it can be used, the client unpacks the DRM content to the source content using the CEK</strong>.  </p>
<h5 id='interconnection-of-content-usage-info'>Interconnection of Content Usage Info</h5>
<p>The PallyCon Cloud Service Site sends the user, content, and device information to the Content Usage Rights Info Page and requests the content usage rights information to create a license of the contents to be used. </p>

<p><img alt="LicenseIssue_Scenario_ContentUsageInfoPage" src="../images/LicenseIssue_Scenario_ContentUsageInfoPage.png" /></p>

<p>The Content Usage Rights Info Page sets the information in line with the policy for using contents determined by the vendor and sends it to the PallyCon Cloud Service Site. </p>
<h3 id='content-usage-rights-info-page'>Content Usage Rights Info Page</h3>
<p>This document describes the protocol and standard for developing a page for receiving the content usage rights information by communicating with the Content Usage Rights Info page.</p>
<h4 id='protocol-post-method-requestresponse-data'>Protocol (POST Method, REQUEST/RESPONSE Data)</h4>
<p>Developers must create response data in line with the data for requesting the content usage rights information from the PallyCon Cloud Service Site by developing the Content Usage Rights Info page.</p>
<h5 id='request-data'>REQUEST DATA</h5><h6 id='details'>Details</h6>
<aside class="notice"> This data must be parsed by the Content Usage Rights Info page. </aside>

<p><code class="prettyprint">http(s)://ContentUsageRightsInfoURL&amp;data=Base64Encoding(AES256Encyption(XML DATA))String</code></p>

<p><em>Format</em></p>

<ul>
<li>Use the UTF-8 String Encoding</li>
<li>POST Method </li>
<li>URL: http(s)://Content Usage Rights Info URL </li>
<li>Body<br>
<strong>Parameter :</strong> <em>data</em> <strong>Value II:</strong> <em>XML DATA</em></li>
</ul>

<p><em>XML DATA</em>
: This data contains the content, user, and device information for which to check the content usage rights information. This data is encrypted with <a href="http://en.wikipedia.org/wiki/Advanced_Encryption_Standard">AES256</a> and then encoded again with Base64 before being delivered. </p>
<h6 id='xml-standards'>XML Standards</h6>
<p>The request data which is sent from the PallyCon Cloud Service Site is sent to the Content Usage Rights Info page with no empty value. </p>
<pre><code class="highlight xml"><span class="cp">&lt;?xml version='1.0' encoding='UTF-8'?&gt;</span>
<span class="nt">&lt;RES&gt;</span>
    <span class="nt">&lt;CID&gt;</span>C000004731001HD<span class="nt">&lt;/CID&gt;</span>
    <span class="nt">&lt;USERID&gt;</span>1113654772<span class="nt">&lt;/USERID&gt;</span>
    <span class="nt">&lt;DEVICEID&gt;</span>YqiqMLuuKbIVtPp+Vl36RdLbE+cMmtADw5M=<span class="nt">&lt;/DEVICEID&gt;</span>
    <span class="nt">&lt;DEVICEMODEL&gt;</span>iPhone<span class="nt">&lt;/DEVICEMODEL&gt;</span>
    <span class="nt">&lt;OID&gt;</span>MOVIE-J-R15-2011<span class="nt">&lt;/OID&gt;</span>
    <span class="nt">&lt;NONCE&gt;</span>fdfe321xb74azv<span class="nt">&lt;/NONCE&gt;</span>
<span class="nt">&lt;/RES&gt;</span>
</code></pre>

<p><em>CID</em>
: This content ID (32-byte, <em>including a Site ID</em>) is extracted from the content to be used and it has been used in packaging. </p>

<p><em>USERID</em>
: This is the ID of the user who wants to use the content. </p>

<p><em>DEVICEID</em>
: This is the ID of the device that wants to use the content. </p>

<p><em>DEVICEMODEL</em>
: This is the model name of the device.</p>

<p><em>OID</em>
: This is the order ID of the content. </p>

<p><em>NONCE</em>
: This value is used to authenticate the data that is communicated between the PallyCon Cloud Service Site and the Content Usage Info page.</p>
<h5 id='response-data'>RESPONSE DATA</h5><h6 id='details'>Details</h6>
<p>This data must be created by the CID issue page. </p>

<p><code class="prettyprint">Base64Encoding(AES256Encyption(XML DATA))String</code></p>

<p><em>Format</em> </p>

<p>Base64Encoding(AES256Encyption(XML DATA)) String<br>
- Use the UTF-8 String Encoding </p>

<p><em>XML DATA</em>
: Response to a request from the PallyCon Cloud service</p>
<h6 id='xml-standards'>XML Standards</h6><pre><code class="highlight xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;RES&gt;</span>
    <span class="nt">&lt;ERROR&gt;</span>0000<span class="nt">&lt;/ERROR&gt;</span>
    <span class="nt">&lt;ERRMSG&gt;</span>OK<span class="nt">&lt;/ERRMSG&gt;</span> 
    <span class="nt">&lt;LIMIT&gt;</span>Y<span class="nt">&lt;/LIMIT&gt;</span>
    <span class="nt">&lt;PD_COUNT&gt;&lt;/PD_COUNT&gt;</span>
    <span class="nt">&lt;PD_START&gt;</span>2013-12-17T13:27:01<span class="nt">&lt;/PD_START&gt;</span>
    <span class="nt">&lt;PD_END&gt;</span>2013-12-18T10:44:56<span class="nt">&lt;/PD_END&gt;</span>
    <span class="nt">&lt;NONCE&gt;</span>fdfe321xb74azv<span class="nt">&lt;/NONCE&gt;</span>
<span class="nt">&lt;/RES&gt;</span>
</code></pre>

<p><em>ERROR</em>
: This is a defined error code, which is a required parameter. It must have the fixed length of 4 bytes, and no empty value is allowed. Set this to <code class="prettyprint">0000</code> if successful; if failed, set this to a 4-byte error code defined by the vendor. </p>

<p><em>ERRORMSG</em>
: This is a message related to the <code class="prettyprint">ERROR</code> value in the event of failure. This is a required parameter, and empty value is only allowed when it is not an error. Up to 255 bytes can be used. </p>

<p><em>LIMIT</em>
: This parameter determines whether contents will be played with no limit. Only &#39;Y&rsquo; and &#39;N&rsquo; are allowed. Other characters are processed as errors. </p>

<p><em>PD_COUNT</em>
: This is a count that must be used in the count type. You must select a value larger than zero when selecting the count type. </p>

<p><em>PD_START</em>
: This is the start date and time in the period that must be used in the period type. You must set a corresponding value to this parameter when selecting the period type. Set the date and time in GMT.  </p>

<p><em>PD_END</em>
: This is the CID generated by the CID policy on the CID issue page. This parameter must be used in the event of success. Empty value is not allowed and up to 32 bytes can be used. For CID, only English alphabets, numbers, and some special characters (&rsquo; _ &rsquo;, &rsquo; . &rsquo;) are allowed. </p>

<p><em>NONCE</em>
: This is a value used by the PallyCon Cloud service to validate the data that communicate with the CID issue page. This is a required parameter. Empty value is not allowed, and <strong>this must be identical to the &#39;NONCE&rsquo; value in Request Data.</strong></p>
<h4 id='a-hrefhttpen-wikipedia-orgwikiadvanced_encryption_standardaes256a-encryptiondecryption'><a href="http://en.wikipedia.org/wiki/Advanced_Encryption_Standard">AES256</a> Encryption/Decryption</h4>
<p>The communication data (REQUEST / RESPONSE DATA) between Cloud Packager and DRM is protected by the <a href="http://en.wikipedia.org/wiki/Advanced_Encryption_Standard">AES256</a> encryption. </p>
<h6 id='details'>Details</h6>
<p><em>Algorithm</em></p>

<p>: - Algorithm : AES<br>
- Keysize : 256 bit<br>
- Mode : CBC</p>

<p><em>Key, Initial vector</em></p>

<p>: - Key: 32 byte  (This can be checked in PallyCon CP Admin pageCloud-Admin)
- Initial vector: 16 byte (a fixed value: <strong>1234567890abcdef</strong>)  </p>

<p><em>Padding</em></p>

<p>: - <a href="http://en.wikipedia.org/wiki/PKCS">PKCS7</a> is used.</p>
<h3 id='how-to-set-content-usage-rights-info'>How to Set Content Usage Rights Info</h3>
<p>The usage period and count included in the license are created by the content usage rights information. The content usage rights information is created by the vendor&rsquo;s policy. As the information required for the vendor to determine a policy, the PallyCon Cloud Service Site sends the Content ID, User ID, Device ID, and Order ID, which have been extracted from Player, to the Content Usage Rights Info Page. </p>

<p>This document explains how the PallyCon Cloud Service Site determines the content usage rights information and sets the usage period and count. </p>
<h4 id='license-rule-information'>License Rule Information</h4>
<p>The License Rule is determined by the usage period and time. There are four License Rules: Count, Period, Unlimited, Count+Period. </p>

<ul>
<li><strong>Count:</strong> Play is managed by count. </li>
<li><strong>Period:</strong> Play is managed by period. </li>
<li><strong>Unlimited:</strong> Play is unlimited. </li>
<li><strong>Count+Period:</strong> Play is managed by count and period. If the period expires, no more play is possible even if the count has not been used up yet. If the count becomes zero, no more play is possible even if the period has not expired. </li>
</ul>

<p>The License Rule is determined by the value set in the Content Usage Rights Info Page. </p>

<p>The following table shows <strong>how to set license rules according to the contents use rights setting</strong>. </p>

<table><thead>
<tr>
<th>License Rules</th>
<th>LIMIT</th>
<th>PD_START</th>
<th>PD_END</th>
<th>COUNT</th>
</tr>
</thead><tbody>
<tr>
<td><strong>Count System</strong></td>
<td>Y</td>
<td>Empty</td>
<td>Empty</td>
<td>Value greater than 0</td>
</tr>
<tr>
<td><strong>Period System</strong></td>
<td>Y</td>
<td>Date before PD_END</td>
<td>Date after PD_START</td>
<td>Empty</td>
</tr>
<tr>
<td><strong>Period System+Count System</strong></td>
<td>Y</td>
<td>Date before PD_END</td>
<td>Date after PD_START</td>
<td>Value greater than 0</td>
</tr>
<tr>
<td><strong>No Limit</strong></td>
<td>N</td>
<td>Empty</td>
<td>Empty</td>
<td>Empty</td>
</tr>
</tbody></table>
<h4 id='content-id-user-id-device-id-order-id'>CONTENT ID, USER ID, DEVICE ID, ORDER ID</h4>
<p>The content usage rights information created by the vendor must use the Content ID, User ID, Device ID, Order ID that have been extracted from PallyCon Player. 
The content usage rights information can be created in various ways by using these four data. To use these four data, you must know details about them. </p>
<h5 id='content-id'>Content ID</h5>
<p>This is the content ID received when the source content was packaged.</p>
<h5 id='user-id'>User ID</h5>
<p>This is the user ID for the Service Site that is operated by the vendor. </p>
<h5 id='device-id'>Device ID</h5>
<p>This is the ID of the device with which user wants to use the contents. For the device ID, the Pallycon Cloud Service Site performs <strong>Device Check</strong>. </p>

<p><strong>Device Check</strong>: This function is used by the vendor to control the number of devices per Site ID in CP Admin.</p>

<p>PallyCon Mobile Player offers the <strong>Device Registration</strong> feature in addition to Device Check in the Pallycon Cloud Service Site. 
This feature is provided together with the <strong>Device Release</strong>. You can <strong>manage the play of the contents downloaded to mobile devices</strong> with these two features.  </p>

<p>In the case of PallyCon PC Player, <strong>Device Registration&quot; is not necessary because contents are played through streaming, and playback can be managed by **Device Check</strong> in the Pallycon Cloud Service Site. </p>

<aside class="notice"> The devices can be managed directly on the content usage information page by setting the number of devices for Mobile, PC, or both Mobile and PC to unlimited in CP Admin.  </aside>
<h5 id='order-id'>Order ID</h5>
<p>Order ID is the order identification of the contents that a user wants to play. This information is identical to the value received from the Service Site of the vendor and is used for identifying the contents to be played. </p>

<p>In actual service, the same contents may be classified into different categories. In this case, contents in different categories may have the same Content ID. To distinguish this, you must use the Order ID. </p>
<h3 id='revision-history'>Revision History</h3>
<p>This table describes the revisions of the License Issue Guide.</p>

<table><thead>
<tr>
<th style="text-align: left">Date</th>
<th style="text-align: left">Detail</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">2014.08.24</td>
<td style="text-align: left">License Issue Guide was created</td>
</tr>
</tbody></table>
<h2 id='moblie-player-integration'>Moblie Player Integration</h2><h3 id='introduction'>Introduction</h3>
<p>This guide has been written to help you set the interaction between <strong>PallyCon Player</strong> and <strong>Service Site</strong> (web server or web page operated by the vendor to interact with the functions provided by PallyCon Player). </p>
<h4 id='about-pallycon-player'>About PallyCon Player</h4>
<aside class="noticce"> PallyCon Player(Mobile, PC) does not support content playback with count-limited license.</aside>

<p><strong>The PallyCon Player app is accessed and used by multiple vendors.</strong> All information including the contents and licenses of companies are managed separately for more effective management of accessing vendors. Therefore, standards in this guide must be observed for clear division of vendors.</p>

<p><strong>Most functions of PallyCon Player are linked with the Service Site in the browser</strong>.</p>

<ul>
<li><strong>Download/Streaming:</strong> When you touch the button on the Web page in the browser, the app is loaded and carries out each function.</li>
<li><strong>Device Register/Release:</strong> You can register/deregister devices to/from the Web server.</li>
<li><strong>Validity Check:</strong> Before downloaded contents are played back, the server is checked to determine whether or not it is OK to play back the contents.</li>
<li>*<em>Download Complete: *</em> When the contents are downloaded, it is notified to the server. </li>
</ul>

<p><strong>PallyCon Player can only play source/packaged video contents.</strong> PallyCon Player can only play video contents: source (non-DRM) MP4 files and (DRM) MP4 files packaged with NCG.</p>

<p><strong>Pallycon Player can be separately controlled from the Pallycon Service Site separately from the control of device check.</strong> Pallycon Player can control the number of devices per user account. This feature is provided for the management of contents downloaded to a mobile device. *<em>If the device registration is successful, you can proceed with downloading and streaming. If the device release is successful, the downloaded contents and the license of the contents are all deleted. *</em></p>

<p><strong>PallyCon Player provides various features related to play</strong>.</p>

<ul>
<li><strong>Favorites:</strong> Users can bookmark frequently used contents.</li>
<li><strong>Section Loop:</strong> You can set a section for repeated play while playing a video.</li>
<li><strong>Play Speed:</strong> You can play contents at the desired speed. In the case of Android, content play speed can be set for 720p or lower resolutions. Play speed can be set between 0.5 and 2.0. </li>
<li><strong>Bookmark:</strong> You can save together with a memo the desired points during play. </li>
<li><strong>Progress:</strong> The progress of the play (local play) of the downloaded content is shown as a percentage. This is not linked with the server.</li>
<li><strong>QnA:</strong> During play, users can touch the QnA button to go to the Web page where they can ask questions about the contents, or this can be used for other purposes.</li>
</ul>
<h4 id='use-of-this-document'>Use of this Document</h4>
<p>This document provides detailed explanation about the specifications, flow, and scenario of the data exchanged between PallyCon Player and Web server. </p>

<p>This description allows you to:</p>

<ul>
<li>  understand the sample scripts provided to developers and receive information needed for building a Web server </li>
<li>control apps and get information required for services, and </li>
<li>get information required for handling CS that occurs during a service. </li>
</ul>
<h4 id='prerequisites'>Prerequisites</h4>
<p>PallyCon Player plays source video files and video files that have been packaged with NCG. Therefore, you must have <strong>source video contents and packaged RM video contents</strong>. </p>

<p><strong>The Content Usage Info Page for issuing licenses must have been developed.</strong></p>

<p>You must understand <strong>the total flow of the service</strong> by reading the Quick Start Guide (Server Interconnection).</p>

<p>You need <strong>technical understanding and application</strong> for setting the data that you give (respond) to and receive (request) from PallyCon Player. PallyCon Player manages and carries out functions according to the response of the Web server. Therefore, the Web server must send correct information to PallyCon Player.   </p>
<h4 id='interconnection-work-procedure'>Interconnection Work Procedure</h4>
<p>If the above &#39;Prerequisites&rsquo; are satisfied, carry out the PallyCon Player interconnection work in the following sequence: </p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td><strong>STEP1</strong></td>
<td>Carefully read this procedure at least once to understand the total flow.</td>
</tr>
<tr>
<td><strong>STEP2</strong></td>
<td>Activate the develop log (communication log between PallyCon Player and Web server). (Set ‘log_type’ in <strong>Download/Streaming Specification</strong> of URL Scheme to &#39;1&rsquo;. You can check the log in the &#39;Environment Settings&rsquo; page of PallyCon Player.)</td>
</tr>
<tr>
<td><strong>STEP3</strong></td>
<td>Start the interconnection test in two service scenarios.</td>
</tr>
</tbody></table>

<p><strong>Download scenario</strong><br>
Download (URL Scheme) -&gt; Vendor Authentication (RI Cloud)] -&gt; Device Register (Service Manager URL) -&gt; Download Complete (Service Manager URL)  -&gt; Validity Check (Service Manager URL)  -&gt; Device Release (Service Manager URL) </p>

<p><strong>Streaming scenario</strong><br>
Download (URL Scheme) -&gt; Vendor Authentication (RI Cloud) -&gt; Device Register (Service Manager URL)  -&gt; Device Release (Service Manager URL)</p>
<h3 id='apis'>APIs</h3>
<p>Communication between PallyCon Player and Web server is carried out through <strong>URL Scheme (Protocol I)</strong> and <strong>HTTP/HTTPs(Protocol II)</strong>. </p>
<h4 id='protocol-i-a-hrefhttpen-wikipedia-orgwikiuri_schemeurl-schemea'>Protocol I: <a href="http://en.wikipedia.org/wiki/URI_scheme">URL Scheme</a></h4>
<p>URL Scheme is used to call PallyCon Player from the Web browser. This approach is used by Download and Streaming (Progressive Download Play) services. </p>
<h5 id='details'>DETAILS</h5>
<ul>
<li>Single-Download URL Scheme: <strong>pallyconplayerdownload://info=</strong> JSON DATA <strong>&amp;site_id=</strong> SITE ID<br></li>
<li>Multi-Download URL Scheme: <strong>pallyconplayerdownloads://info=</strong> JSON DATA <strong>&amp;site_id=</strong> SITE ID</li>
<li>Streaming URL Scheme: <strong>pallyconplayerplay://info=</strong> JSON DATA <strong>&amp;site_id=</strong> SITE ID</li>
</ul>

<p><em>Format</em></p>

<ul>
<li><strong>UTF-8 String Encoding</strong> is used.</li>
</ul>

<p><em>JSON DATA</em></p>

<ul>
<li><strong>Base64Encoding(AES256Encyption(JSON DATA)) String</strong><br></li>
<li>The downloaded contents, user information, and PallyCon Player settings</li>
</ul>

<p><em>SITE ID</em></p>

<ul>
<li>Service site ID (this can be checked in the PallyCon CP Admin Page)</li>
</ul>
<h4 id='protocol-ii-a-hrefhttpen-wikipedia-orgwikihypertext_transfer_protocolhttpaa-hrefhttpen-wikipedia-orgwikihttp_securehttpsa-protocol-post-method'>Protocol II: <a href="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a>/<a href="http://en.wikipedia.org/wiki/HTTP_Secure">HTTPs</a> protocol (POST method)</h4>
<p>Communication between PallyCon Player and Web server is carried out through HTTP/HTTPs. Data are sent by using the <strong>POST method</strong>. 
The following functions use communication between PallyCon Player and Web server: </p>

<ul>
<li>Device Register</li>
<li>Download Complete</li>
<li>Validity Check</li>
<li>Device Release </li>
</ul>
<h5 id='details'>DETAILS</h5>
<p><img alt="Mobile_ProtocolII" src="../images/Mobile_ProtocolII.png" /></p>

<p>HTTP/HTTPs communication consists of the data requested by PallyCon Player to the Web server (REQUEST DATA) and the data responded by the Web server to PallyCon Player (RESPONSE DATA).</p>
<h6 id='strongrequest-datastrong'><strong>REQUEST DATA</strong></h6>
<aside class="notice">Every function uses one URL (**Service manager URL**). The Service manager URL receives the JSON data of URL Scheme and **saves it in the local DB**.</aside>

<p><em>Format</em></p>

<ul>
<li><strong>UTF-8 String Encoding</strong> is used.</li>
<li>POST Method </li>
<li>URL: http(s)://Service manager URL<br></li>
<li>Body<br>
<strong>Parameter</strong>: <em>data</em><br>
<strong>Value</strong>: <em>Base64Encoding(AES256Encyption(JSON DATA))String</em><br></li>
</ul>

<p><code class="prettyprint">http(s)://Service_Manager_URL&amp;data=Base64Encoding(AES256Encryption(JSON DATA))String</code></p>

<p><em>JSON DATA</em>
: Because one URL must process four different data, a parameter for distinguishing four modes is provided in the JSON data.</p>

<ul>
<li>Device Register:  <strong>{&ldquo;mode&rdquo;:&ldquo;Device Register&rdquo;, …}</strong><br></li>
<li>Download Complete: <strong>{&ldquo;mode&rdquo;:&ldquo;Download Complete&rdquo;, …}</strong><br></li>
<li>Validity Check: <strong>{&ldquo;mode&rdquo;:&ldquo;Validity Check&rdquo;, …}</strong><br></li>
<li>Device Release: <strong>{&ldquo;mode&rdquo;:&ldquo;Device Release&rdquo;, …}</strong><br></li>
</ul>
<h6 id='strongresponse-datastrong'><strong>RESPONSE DATA</strong></h6>
<p><em>Format</em> </p>

<ul>
<li>Base64Encoding(AES256Encyption(JSON DATA)) String<br></li>
<li><strong>UTF-8 String Encoding</strong> is used.</li>
</ul>

<p><em>JSON DATA</em></p>

<ul>
<li>Response to the request of PallyCon Player</li>
</ul>
<h4 id='security'>Security</h4>
<p>The communication data (REQUEST/RESPONSE DATA) between PallyCon Player and Web server is protected through <a href="http://en.wikipedia.org/wiki/Advanced_Encryption_Standard">AES256</a> encryption. </p>
<h5 id='details'>DETAILS</h5>
<p><em>Algorithm</em></p>

<p>: - Algorithm : AES<br>
- Keysize : 256 bit<br>
- Mode : CBC</p>

<p><em>Key, Initial vector</em></p>

<p>: - Key: 32 byte  (The key for each service site can be checked in the PallyCon CP Admin Page)
- Initial vector: 16 byte  (a fixed value: <strong>1234567890abcdef</strong>)</p>

<p><em>Padding</em></p>

<p>: - <a href="http://en.wikipedia.org/wiki/PKCS">PKCS7</a> is used.</p>
<h3 id='apis-working-scenario'>APIs Working Scenario</h3><h4 id='service-scenario'>Service Scenario</h4>
<p>PallyCon Player largely provides two services by interacting with the server.</p>
<h5 id='downloadlocal-play'>Download/Local play</h5>
<p>This service consists of touching the button to download contents, playing the downloaded contents, and releasing the device. In this service, various functions are used and data is saved or loaded to use the functions. The functions used in this service and the data setting actions are listed below.  </p>

<ul>
<li><a href="#checking-the-status-of-app-pallycon-player">Check the status of the app (PallyCon Player)</a><br></li>
<li><a href="#vendor-authentication">Vendor Authentication</a><br></li>
<li><a href="#decryption">Decryption</a><br></li>
<li><a href="#device-register">Device Register</a><br></li>
<li>Download Complete</li>
<li><a href="#validity-check">Validity Check</a></li>
<li><a href="#device-release">Device Release</a><br></li>
</ul>
<h5 id='streaming'>Streaming</h5>
<p>This service consists of touching the Play button for contents in a Web page and play of the contents. The functions used in this service and the data setting actions are listed below.   </p>

<ul>
<li><a href="#checking-the-status-of-app-pallycon-player">Check the status of the app (PallyCon Player)</a><br></li>
<li><a href="#vendor-authentication">Vendor Authentication</a><br></li>
<li><a href="#decryption">Decryption</a><br></li>
<li><a href="#device-register">Device Register</a><br></li>
<li><a href="#device-release">Device Release</a><br></li>
</ul>
<h5 id='scenario'>Scenario</h5>
<p>Download and Streaming services have the same structure of calling PallyCon Player from a Web page. Therefore, as shown in the figure, they have the same process consisting of ‘<a href="#checking-the-status-of-app-pallycon-player">Check the status of the app (PallyCon Player)</a>’, ‘<a href="#vendor-authentication">Vendor Authentication</a>’, ‘<a href="#device-register">Device Register</a>’, etc. </p>

<p><img alt="Mobile_Scenario_URLScheme" src="../images/Mobile_Scenario_URLScheme.png" /></p>

<p>Furthermore, they both include the ‘<a href="#device-release">Device Release</a>’ function as the both have the &#39;Device Register&rsquo;. The device release scenario is described below. </p>

<p><img alt="Mobile_Scenario_Unregister" src="../images/Mobile_Scenario_Unregister.png" /></p>

<p>You can see the downloaded contents in the Contents List of PallyCon Player. You can also see them in ‘Favorites List’, ‘Bookmark List’, and ‘Recently Played Contents List’ when you play the contents or add them to bookmark and favorites. The scenario for selecting contents to play in each list is described below. </p>

<p><img alt="Mobile_Scenario_Localplay" src="../images/Mobile_Scenario_Localplay.png" /></p>
<h4 id='checking-the-status-of-app-pallycon-player'>Checking the Status of App (PallyCon Player)</h4>
<p>When you run PallyCon Player through URL Scheme, check the status of PallyCon Player for running each function. 
Access to URL Scheme is blocked if the status of PallyCon Player is **‘Download’, ‘Playing’, or ‘Device Release Request’.</p>
<h4 id='vendor-authentication'>Vendor Authentication</h4>
<p><strong>You can start vendor authentication by extracting ‘site_id’ from the data accessing URL Scheme.</strong> ‘site_id’ is one of the information issued when contracting with INKA and does not require encryption.</p>

<p><strong>Vendor authentication does not need to be developed by developers because it is done by communication with the RI Cloud server of INKA.</strong> What developers need to know is that when vendor authentication is successful, the key and IV for decrypting the encrypted vendor name corresponding to &#39;site_id&rsquo; and &#39;info&rsquo; value of URL Scheme are sent as the response data. </p>

<p><img alt="Mobile_Scenario_EnterpriseCertificate" src="../images/Mobile_Scenario_EnterpriseCertificate.png" /></p>

<p><strong>AES 256 encryption/decryption Key, IV(Initial vector):</strong></p>

<ul>
<li>You receive the key for AES256 encryption/decryption of the data for interconnecting with the Web server when contracting with INKA. Because this value is matched to &#39;site_id&rsquo;, you must use the site_id, AES256 Key that you received at the time of contract.  (The Initial Vector used together with the AES256 Key is a fixed value of 16 bytes, which is &rsquo;<strong>1234567890abcdef</strong>&rsquo;.)<br></li>
<li>The vendor name, key and IV received through vendor authentication are saved in the DB.<br></li>
<li>Because the communication with the RI Cloud server of INKA uses <a href="http://en.wikipedia.org/wiki/Public_key_infrastructure">PKI</a>, the data used in the communication and DB are strongly protected. </li>
</ul>
<h4 id='decryption'>Decryption</h4>
<p>Encryption and decryption are applied to all data communicated between the Web server and PallyCon Player. This section describes the decryption scenario after vendor authentication in each service scenario.</p>

<p><img alt="Mobile_Scenario_Decryption" src="../images/Mobile_Scenario_Decryption.png" /></p>

<p>The value corresponding to ‘info’ of URL Scheme is decrypted through AES256 Key/IV that has been received from the RI Cloud server. When decryption is successful, the JSON string that has all information required for download and streamingis obtained. The vendor information is extracted from the JSON string and saved in the DB.</p>
<h4 id='device-register'>Device Register</h4>
<p>To register a device, extract user information from the decrypted JSON string, device information from the user device, and app information from PallyCon Player. Convert the extracted information into a JSON string and request device registration to the Web server. </p>

<p><img alt="Mobile_Scenario_DeviceRegister" src="../images/Mobile_Scenario_DeviceRegister.png" /></p>

<p>When response data to the device registration request is received from the Web server, the data is decrypted and success or failure is checked. Then the message is extracted from the response data from the Web server and displayed as alert in PallyCon Player. When device registration is successful, the user information is saved in the DB. </p>
<h4 id='streaming'>Streaming</h4>
<p><strong>iOS supports streaming only in WiFi.</strong></p>

<p><strong><a href="https://developer.apple.com/appstore/resources/approval/guidelines.html">Apple Regulations (9.4)</a> prescribe the use of HLS (HTTP Live Stream) for streaming in cellular mode.</strong> However, PallyCon Player uses <strong>Progressive Download Play</strong> for streaming. Therefore, streaming in iOS is only possible in Wifi mode. </p>

<p><img alt="Mobile_Scenario_Streaming" src="../images/Mobile_Scenario_Streaming.png" /></p>

<p>To start streaming, you must receive a license from the RI Cloud server of INKA using the &#39;user information&rsquo; and &#39;content information&rsquo; from PallyCon Player and check if the license is valid. </p>
<h4 id='download'>Download</h4>
<p>There are two types of download: Single-Download and Multi-Download. In general, Single-Download is performed by a user touching the download button of the desired contents list in the Web page, and Multi-Download is performed by a user selecting the desired contents in the Web page and touching the Multi-Download button. </p>

<p><img alt="Mobile_Scenario_Download" src="../images/Mobile_Scenario_Download.png" /></p>

<p>To download the selected contents, PallyCon Player <strong>creates a download list</strong>. The download list has one item for Single-Download and n items for Multi-Download.<br>
<strong>Download begins from line 0 of the download list</strong>. When the download is completed, <strong>the information of the download list is saved in the DB</strong>.
The <strong>license of the downloaded file is issued</strong> from the Cloud server of INKA using the user information and contents information. Even if no license is issued, it is not determined as download failure. The reason is that when you attempt local play and the license is checked, if there is no license and it is online, an attempt is made to issue a license. 
A user sends <strong>to the Web server the information that contents download has been completed</strong>. You can save this information in the Web server and use it later for refund or statistics. 
If there are contents to download in the download list, the download of the next items in the list is attempted. If there is none, <strong>PallyCon Player moves to the top list in the storage box</strong>. </p>
<h4 id='validity-check'>Validity Check</h4>
<p><strong>The first thing to do before playing contents is to check the play_type in the vendor information of Local DB.</strong>
Whether or not to perform validity check is determined by the play_type.  </p>

<p><strong>If validity check is required,</strong>
The &#39;user information&rsquo;, &#39;device information&rsquo;, and &#39;content information&rsquo; are extracted and validity check for the contents is requested to the Web server. As a response, the Web server returns validity and message. </p>

<p><img alt="Mobile_Scenario_ValidityCheck" src="../images/Mobile_Scenario_ValidityCheck.png" /></p>

<p><strong>There are four types of content validity status.</strong></p>

<ul>
<li><strong>Play Possible:</strong> In this state, it is possible to play contents. This response means to play in line with the license information.<br></li>
<li><strong>Cancelled:</strong> This is a response to the vendor that a user is not using the contents temporarily. In this case, the license is deleted.<br></li>
<li><strong>Refund:</strong> A user received a refund for this content from the vendor. In this, contents are serviced as a package. Thus, the categories of contents and all contents corresponding to them (including licenses) are deleted.<br></li>
<li><strong>Play Limited:</strong> Licenses and contents are not deleted, but play is limited due to special circumstances. </li>
</ul>
<h4 id='device-release'>Device Release</h4>
<p>Device release is requested by sending the device information and user information to the Web server. As a response, the Web server returns success or failure of device release and a message. If device release is successful, PallyCon Player deletes vendors, categories, contents, and licenses. </p>

<p><img alt="Mobile_Scenario_DeviceRelease" src="../images/Mobile_Scenario_DeviceRelease.png" /></p>
<h3 id='json-standards'>JSON Standards</h3>
<p>This section provides detailed descriptions about the specifications of JSON Data that was explained in APIs. Because the type of all the values used in JSON is <strong>String</strong>, you must enclose the value with <strong>quotation marks (&ldquo;&rdquo;)</strong>.    </p>

<ul>
<li>To improve the readability of JSON Strings, each parameter has been separated by a line break. However, note that actual data do not allow line breaks or spaces between parameters.<br></li>
<li>All parameters in the Request Data sent from PallyCon Player are required.</li>
</ul>
<h4 id='download--streaming-standard'>Download / Streaming Standard</h4>
<p>This data must be set to the Download / Streaming buttons in the Web page. </p>
<pre><code class="highlight json"><span class="err">Single-Download_JSON_String_Streaming_JSON_String</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"user_id"</span><span class="p">:</span><span class="s2">"ID"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"current_url"</span><span class="p">:</span><span class="s2">"http://demo.netsync.co.kr/download_new2.asp"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"enterprise_icon_url"</span><span class="p">:</span><span class="s2">"http://demo.netsync.co.kr/KR2/image/a_logo.png"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"play_type"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"service_manager"</span><span class="p">:</span><span class="s2">"http://demo.netsync.co.kr/LIC/service_manager.asp"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"log_type"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"category_name"</span><span class="p">:</span><span class="s2">"Category"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"category_person"</span><span class="p">:</span><span class="s2">"Person"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"category_image"</span><span class="p">:</span><span class="s2">"http://demo.netsync.co.krKR2/image/korean_icon.png"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"category_assortment"</span><span class="p">:</span><span class="s2">"Assortment"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"contents"</span><span class="p">:[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"content_file"</span><span class="p">:</span><span class="s2">"http://112.136.244.30/1_low_language_basic.mp4.ncg"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"content_name"</span><span class="p">:</span><span class="s2">"Content"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"content_qna"</span><span class="p">:</span><span class="s2">"QnA"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"info_orderID"</span><span class="p">:</span><span class="s2">"OrderID"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"info_one"</span><span class="p">:</span><span class="s2">"One"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"info_two"</span><span class="p">:</span><span class="s2">"Two"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"info_three"</span><span class="p">:</span><span class="s2">"Three"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"info_four"</span><span class="p">:</span><span class="s2">"Four"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"last_play_time"</span><span class="p">:</span><span class="s2">"10"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"lms_sections"</span><span class="p">:</span><span class="s2">"0:10"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"lms_percent"</span><span class="p">:</span><span class="s2">"10"</span><span class="w">
         </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre><code class="highlight json"><span class="err">Multi-Download_JSON_String_(two_Contents)</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"user_id"</span><span class="p">:</span><span class="s2">"ID"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"current_url"</span><span class="p">:</span><span class="s2">"http://demo.netsync.co.kr/download_new2.asp"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"enterprise_icon_url"</span><span class="p">:</span><span class="s2">"http://demo.netsync.co.kr/KR2/image/a_logo.png"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"play_type"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"service_manager"</span><span class="p">:</span><span class="s2">"http://demo.netsync.co.kr/LIC/service_manager.asp"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"log_type"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"category_name"</span><span class="p">:</span><span class="s2">"Category"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"category_person"</span><span class="p">:</span><span class="s2">"Person"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"category_image"</span><span class="p">:</span><span class="s2">"http://demo.netsync.co.krKR2/image/korean_icon.png"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"category_assortment"</span><span class="p">:</span><span class="s2">"Assortment"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"contents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"content_file"</span><span class="p">:</span><span class="s2">"http://112.136.244.30/1_low_language_basic.mp4.ncg"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"content_name"</span><span class="p">:</span><span class="s2">"Content"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"content_qna"</span><span class="p">:</span><span class="s2">"QnA"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"info_orderID"</span><span class="p">:</span><span class="s2">"OrderID"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"info_one"</span><span class="p">:</span><span class="s2">"One"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"info_two"</span><span class="p">:</span><span class="s2">"Two"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"info_three"</span><span class="p">:</span><span class="s2">"Three"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"info_four"</span><span class="p">:</span><span class="s2">"Four"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"last_play_time"</span><span class="p">:</span><span class="s2">"10"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"lms_sections"</span><span class="p">:</span><span class="s2">"0:10"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"lms_percent"</span><span class="p">:</span><span class="s2">"10"</span><span class="w">
         </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"content_file"</span><span class="p">:</span><span class="s2">"http://112.136.244.30/1_low_language_basic.mp4.ncg"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"content_name"</span><span class="p">:</span><span class="s2">"Content"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"content_qna"</span><span class="p">:</span><span class="s2">"QnA"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"info_orderID"</span><span class="p">:</span><span class="s2">"OrderID"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"info_one"</span><span class="p">:</span><span class="s2">"One"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"info_two"</span><span class="p">:</span><span class="s2">"Two"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"info_three"</span><span class="p">:</span><span class="s2">"Three"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"info_four"</span><span class="p">:</span><span class="s2">"Four"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"last_play_time"</span><span class="p">:</span><span class="s2">"10"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"lms_sections"</span><span class="p">:</span><span class="s2">"0:10"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"lms_percent"</span><span class="p">:</span><span class="s2">"10"</span><span class="w">
         </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>user_id</em>
: This is a service site user ID which is a required parameter. In PallyCon Player, <code class="prettyprint">null</code> in user ID is received when a Web page expires. </p>

<p><em>current_url</em>
: This URL is used to go to the Web page when download is cancelled or streaming is completed. This parameter is not required. However, this must be set to empty value (&ldquo;&rdquo;) if there is no value even though it is used. </p>

<p><em>enterprise_icon_url</em>
: This is the file address of the icon to be shown in the vendor list of PallyCon Player. This parameter is not required. When this is used, a space/default image is displayed in the list when this parameter has no value. </p>

<p><em>play_type</em>
: This value is the condition for playing the contents downloaded from PallyCon Player. This parameter is not required. However, if this is used, a value must be set. If this is not used, the default is &#39;2&rsquo;. </p>

<ul>
<li><strong>0:</strong> In online state, the validity check for the content is performed and play is determined by the response value. In offline state, the content is played unconditionally.</li>
<li><strong>1:</strong> The validity check for the content is performed only in online state, and play is determined by the response value.</li>
<li><strong>2:</strong> Contents are played unconditionally in online or offline state.</li>
</ul>

<p><em>service_manager</em>
: This is the Service Manager URL used by PallyCon Player to communicate with the Web server. This parameter is required and empty value is not allowed.  </p>

<p><em>log_type</em>
: This parameter is used for log type setting in PallyCon Player. This is not required. However, if this is used, a value must be set. If this is not used, the default is &#39;2&rsquo;.<br>
Logs can be used to get communication, play, and license information during interconnection test or customer support. </p>

<ul>
<li><strong>0:</strong> 300 bytes of logs are kept in the Local DB, which are sent to the Web server when communication or license, etc. must be modified by a vendor. (<strong>NOT SUPPORT</strong>)</li>
<li><strong>1:</strong> This value is set for interconnection test with PallyCon Player before service. Logs are saved in the Local DB with no limitation to the length. There is Log button in the &#39;Environment Settings&rsquo; page which allows you to instantly check logs.</li>
<li><strong>2:</strong> Logs are not used.</li>
</ul>

<p><em>category_name</em>
: This category name appears in the category list of PallyCon Player. This parameter is required. All characters are allowed, but empty value is not allowed. </p>

<p><em>category_person</em>
: This value is for entering other information that is shown together with the category name in the category list. This is a required parameter. All characters are allowed, but empty value is not allowed. </p>

<p><em>category_image</em>
: This is the file address of the icon to be shown in the category list. This parameter is not required. When this parameter has no value, a space/default image is displayed in the list. </p>

<p><em>category_assortment</em>
: This parameter is for category assortment, which will be used later in list sorting method. This parameter is not required and empty value is allowed.</p>

<p><em>contents</em>
: This parameter contains information about the downloaded or played contents. When multi-download is performed, the contents must be entered as an array.</p>

<p><strong>Single-download (Streaming)</strong>: &ldquo;contents&rdquo;:[{&ldquo;content_file&rdquo;:&ldquo;&rdquo;,&hellip;}]<br>
<strong>Multi-download</strong>: &ldquo;contents&rdquo;:[{&ldquo;content_file&rdquo;:&ldquo;&rdquo;,&hellip;},{&ldquo;content_file&rdquo;:&ldquo;&rdquo;,&hellip;},&hellip;]</p>

<p><em>content_file</em>
: This is the server URL where the downloaded/played file exists. This parameter is required. Empty value is not allowed. </p>

<p><em>content_name</em>
: This is the name of content to be displayed in the contents list of PallyCon Player. This parameter is required. All characters are allowed, but empty value is not allowed. </p>

<p><em>content_qna</em>
: This is a URL used to go to the Web page of the browser to leave a question while playing a content. This parameter is not required. Empty value is allowed. </p>

<p><em>info_orderID</em>
: This is the order information of contents. This information is used to verify purchasing when a license is issued. This is a required parameter and empty value is not allowed. </p>

<p><em>info_one, info_two, info_three, info_four</em>
: This is additional information for distinguishing contents when download complete or validity check information is sent. This parameter is not required and empty value is allowed. </p>
<h4 id='device-registration-standard'>Device Registration Standard</h4><h5 id='request-data'>Request data</h5><pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"mode"</span><span class="p">:</span><span class="s2">"Device Register"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"site_id"</span><span class="p">:</span><span class="s2">"Site ID"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user_id"</span><span class="p">:</span><span class="s2">"test2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"device_id"</span><span class="p">:</span><span class="s2">"DID01_WZnTQFOHmZiv1vsevtorDtFHRNc="</span><span class="p">,</span><span class="w">
    </span><span class="s2">"device_model"</span><span class="p">:</span><span class="s2">"iPod5,1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">" app_version"</span><span class="p">:</span><span class="s2">"1.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>mode</em>
: In every function, only one Service Manager URL is used for communication with the Web server. This value allows branching by function in Service manager URL. The mode for device registration is &#39;Device Register&rsquo;. </p>

<p><em>site_id</em>
: This fixed value is issued to vendors and can be checked in Cloud Admin page. </p>

<p><em>user_id</em>
: This is the user ID stored in the device DB. </p>

<p><em>device</em>id_</p>

<ul>
<li><em>iOS</em>: The device ID is created with UUID. If you install PallyCon Player again after performing factory reset without device release in PallyCon Player and Web server, device registration fails because a new device ID is created. In this case, you must contact the vendor and ask for device release.<br></li>
<li><em>Android</em>: The device ID is created by combining various pieces of information in the device. </li>
</ul>

<p><em>device_model</em></p>

<ul>
<li><em>iOS</em>: The device platform is extracted.   <em>ex)</em> iPhone6,1(iPhone5S)<br></li>
<li><em>Android</em>: The device model name in the device environment settings is extracted. </li>
</ul>

<p><em>app_version</em>
: This is the version of PallyCon Player that is registered and displayed in the market. </p>
<h5 id='response-data'>Response data</h5><pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response"</span><span class="p">:</span><span class="s2">"Y"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message_two"</span><span class="p">:</span><span class="s2">""</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>response</em>
: This is success or failure of device registration. This is a required parameter that must be entered. Empty value is not allowed. This value must be set as &#39;Y | N&rsquo;.</p>

<p><em>message</em>
: This is a message corresponding to the success or failure of device registration, which is displayed as alert in PallyCon Player. This parameter is required and allows empty value. If this is empty value, &#39;Succeeded in registering the device.’ or ‘Failed to register the device.’ is set as the default message. </p>

<p><em>message_two</em>
: This is an interface that can be used for other uses than success or failure, and message. In case the same &#39;device_id&rsquo; is extracted in Android, if &#39;NOT_SUPPORT_DEVICE_MODEL&rsquo; is set to this parameter, device_id is extracted and registration is attempted again. </p>
<h4 id='download-complete-standard'>Download Complete Standard</h4>
<p>No separate response data standard exists for download complete, because the response data of the Web server is not received.</p>
<h5 id='request-data'>Request data</h5><pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"mode"</span><span class="p">:</span><span class="s2">"Download Complete"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"site_id"</span><span class="p">:</span><span class="s2">"Site ID"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user_id"</span><span class="p">:</span><span class="s2">"test2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"device_id"</span><span class="p">:</span><span class="s2">"DID01_WZnTQFOHmZiv1vsevtorDtFHRNc="</span><span class="p">,</span><span class="w">
    </span><span class="s2">"date"</span><span class="p">:</span><span class="s2">"201405191120"</span><span class="p">,</span><span class="w">
    </span><span class="s2">" download_status"</span><span class="p">:</span><span class="s2">"Y"</span><span class="p">,</span><span class="w">
    </span><span class="s2">" info_orderID"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">" info_one"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"info_two"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"info_three"</span><span class="p">:</span><span class="s2">"A"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"info_four"</span><span class="p">:</span><span class="s2">"1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>mode</em>
: In every function, only one Service Manager URL is used for communication with the Web server. This value allows branching by function in Service Manager URL. The mode for download complete is &#39;Download Complete&rsquo;. </p>

<p><em>site_id</em>
: This fixed value is issued to vendors and can be checked in Cloud Admin page. </p>

<p><em>user_id</em>
: This is the user ID stored in the device. </p>

<p><em>device_id</em>
: This is a device ID extracted from the device. </p>

<ul>
<li><em>iOS</em>: The device ID is created with UUID. If you install PallyCon Player again after performing factory reset without device release in PallyCon Player and Web server, device registration fails because a new device ID is created. In this case, you must contact the vendor and ask for device release.<br></li>
<li><em>Android</em>: The device ID is created by combining various pieces of information in the device. </li>
</ul>

<p><em>date</em>
: Current date extracted from the device 
<strong>Date standard : yyyyMMddHHmm</strong>
<em>ex)</em> 201412012359      -&gt;      December 1, 2014, 23::59</p>

<p><em>download_status</em>
: This parameter informs whether or not download has been completed. This value is displayed as Y|N. </p>

<p><em>info_orderID, info_one, info_two, info_three, info_four</em>
: These parameters and values had been received through Protocol I (URL Scheme) and saved, and then were called. These are used as additional information for distinguishing contents by the Web server. </p>
<h4 id='validity-check-standard'>Validity Check Standard</h4><h5 id='request-data'>Request data</h5><pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"mode"</span><span class="p">:</span><span class="s2">"Validity Check"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"site_id"</span><span class="p">:</span><span class="s2">"Site ID"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user_id"</span><span class="p">:</span><span class="s2">"test2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"device_id"</span><span class="p">:</span><span class="s2">"DID01_WZnTQFOHmZiv1vsevtorDtFHRNc="</span><span class="p">,</span><span class="w">
    </span><span class="s2">"category_name"</span><span class="p">:</span><span class="s2">"[A Company_Free Event]2014 Korean Language Special Course"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"content_name"</span><span class="p">:</span><span class="s2">"Lecture 1_Jeo_Basics of Korean Language"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"info_orderID"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"info_one"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"info_two"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"info_three"</span><span class="p">:</span><span class="s2">"A"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"info_four"</span><span class="p">:</span><span class="s2">"1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>mode</em>
: In every function, only one Service Manager URL is used for communication with the Web server. This value allows branching by function in Service Manager URL. The mode for validity check is &#39;Validity Check&rsquo;. </p>

<p><em>site_id</em>
: This fixed value is issued to vendors and can be checked in Cloud Admin page. </p>

<p><em>user_id</em>
: This is the user ID stored in the device.</p>

<p><em>device_id</em>
: This is a device ID extracted from the device.</p>

<ul>
<li><em>iOS</em>: The device ID is created with UUID. If you install PallyCon Player again after performing factory reset without device release in PallyCon Player and Web server, device registration fails because a new device ID is created. In this case, you must contact the vendor and ask for device release.<br></li>
<li><em>Android</em>: The device ID is created by combining various pieces of information in the device. </li>
</ul>

<p><em>category_name</em>
: This is the category name stored in the device DB. </p>

<p>content_name
: This is the content name stored in the device DB. </p>

<p>info_orderID, info_one, info_two, info_three, info_four
: These parameters and values had been received through Protocol I (URL Scheme) and saved, and then were called. These are used as additional information for distinguishing contents by the Web server.</p>
<h5 id='response-data'>Response data</h5><pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="s2">"SUCCESS"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>response</em>
: This parameter is used for sending the validity check result for the content to be played from the server to PallyCon Player. Empty value is not allowed. This value must be set as one of &#39;0 | 1 | 2 | 3&rsquo;. </p>

<ul>
<li><em>0</em>: Play Allowed</li>
<li><em>1</em>: Cancelled (the license of the content is deleted.)<br></li>
<li><em>2</em>: Refund (even the category containing the content is deleted.)<br></li>
<li><em>3</em>: Play Limited</li>
</ul>

<p><em>message</em>
: This parameter is used to enter a server message to be displayed as alert in PallyCon Player. This parameter is required. Empty value is allowed when play is allowed (response: 0). Empty value is not allowed for other cases. </p>
<h4 id='device-un-registration-standard'>Device Un-registration Standard</h4><h5 id='request-data'>Request data</h5><pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"mode"</span><span class="p">:</span><span class="s2">"Device Release"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"site_id"</span><span class="p">:</span><span class="s2">"Site ID"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user_id"</span><span class="p">:</span><span class="s2">"test3"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"device_id"</span><span class="p">:</span><span class="s2">"DID01_WZnTQFOHmZiv1vsevtorDtFHRNc="</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>mode</em>
: In every function, only one Service Manager URL is used for communication with the Web server. This value allows branching by function in Service manager URL. The mode for device release is &#39;Device Release&rsquo;. </p>

<p><em>site_id</em>
: This fixed value is issued to vendors and can be checked in Cloud Admin page. </p>

<p><em>user_id</em>
: This is the user ID stored in the device.</p>

<p><em>device_id</em>
: This is a device ID extracted from the device. </p>

<ul>
<li><em>iOS</em>: The device ID is created with UUID. If you install PallyCon Player again after performing factory reset without device release in PallyCon Player and Web server, device registration fails because a new device ID is created. In this case, you must contact the vendor and ask for device release.<br></li>
<li><em>Android</em>: The device ID is created by combining various pieces of information in the device. </li>
</ul>
<h5 id='response-data'>Response data</h5><pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"response"</span><span class="p">:</span><span class="s2">"Y"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="s2">"Success"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>response</em>
: This is success or failure of device release. This is a required parameter that must be entered. Empty value is not allowed. This value must be set as &#39;Y | N&rsquo;.</p>

<p><em>message</em>
: This is a message corresponding to the success or failure of device release, which is displayed as alert in PallyCon Player. This parameter is required and allows empty value. If this is empty value, &#39;Succeeded in releasing the device.’ or ‘Failed to release the device.’ is set as the default message. </p>
<h3 id='log'>Log</h3>
<p>This document describes how to use the &#39;Log View&rsquo; function which is provided for interconnection test.  </p>

<p><strong>Information shown in logs</strong></p>

<ul>
<li>Request/response data exchanged between PallyCon Player and Web Server</li>
<li>Download status/information</li>
<li>License check/issue information</li>
<li>Content play information</li>
</ul>
<h4 id='log-view-settings'>Log View Settings</h4>
<p>Logs can be set in <strong>‘Download/Streaming’ JSON DATA (log_type) of URL Scheme</strong>, and can be checked in the <strong>&#39;Environment Settings&rsquo; page of PallyCon Player</strong>. 
When you touch the &#39;Log View&rsquo; button in Environment Settings, the vendors whose ‘log_type’ is ‘1’ are listed. Touching a vendor in the list whose logs you want to see shows the logs of the vendor. </p>
<h4 id='content-of-logs'>Content of Logs</h4>
<p>The content of logs is shown in the format illustrated in the following figure. 
You can reset the logs by touching the <strong>‘Refresh’</strong> button at top right.</p>

<p><img alt="Mobile_Scenario_DeviceRelease" src="../images/Mobile_Log.png" /></p>
<h3 id='revision-history'>Revision History</h3>
<p>This table describes the revisions of the PallyCon Player Interconnection Guide.</p>

<table><thead>
<tr>
<th style="text-align: left">Date</th>
<th style="text-align: left">Detail</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">2014.08.19</td>
<td style="text-align: left">PallyCon Player Mobile Interconnection Guide was created</td>
</tr>
</tbody></table>
<h2 id='pc-player-integration'>PC Player Integration</h2><h3 id='introduction'>Introduction</h3>
<p>This document is a guide to the interconnection between the PallyCon PC Web Player and the Web server of the Service Site.</p>
<h4 id='about-pallycon-pc-web-player'>About PallyCon PC Web Player</h4>
<aside class="notice">PallyCon Player (Mobile, PC) does not support playing for a license based on the count system.</aside>

<p><strong>PallyCon PC Web Player is designed for Web pages of the Service Site.</strong> Therefore, it only provides streaming feature for playing contents on a Web page when users click the contents to play. 
<strong>PallyCon PC Web Player does not check the number of devices because it only provides streaming play.</strong> Instead, it can control the number of devices by controlling simultaneous connections. </p>

<p><strong>PallyCon PC Web Player can play non-DRM/DRM video contents.</strong> For DRM contents, only Progressive Download Play is supported; for non-DRM contents, both Progressive Download Play and Http Live Streaming are supported. For supported video formats, MP4 is recommended in the case of DRM contents for integrated services with mobile. However, in the case of non-DRM contents, WMV, MPEG2-TS, Matroska, AVI, and FLV are supported as well as MP4. </p>

<table><thead>
<tr>
<th>Content</th>
<th>Video Format</th>
<th>Streaming Type</th>
</tr>
</thead><tbody>
<tr>
<td>DRM Contents</td>
<td>MP4</td>
<td>Progressive Download Play</td>
</tr>
<tr>
<td>non-DRM Contents</td>
<td>MP4, WMV, MPEG2-TS, Matroska, AVI, FLV</td>
<td>Progressive Download Play, Http Live Streaming</td>
</tr>
</tbody></table>

<aside class="warning">At present, PallyCon PC Web Player can only play DRM contents. It will be updated later to play Non-DRM contents. </aside>

<p><strong>PallyCon PC Web Player provides various features related to playing.</strong></p>

<table><thead>
<tr>
<th>Features</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Bookmark</td>
<td>You can mark a point and easily move to it while playing a content. Furthermore, memo feature is provided and interconnection with the Service Site is possible.</td>
</tr>
<tr>
<td>Progress information</td>
<td>You can manage the progress of content playing by playback section and percent. It is also possible to interconnect with the Service Site.</td>
</tr>
<tr>
<td>Resume</td>
<td>You can play contents again from the point that you stopped playing last time. It is also possible to interconnect with the Service Site.</td>
</tr>
<tr>
<td>Speed</td>
<td>You can change the content playing speed between 0.8x and 2.0x.</td>
</tr>
<tr>
<td>Playlist display</td>
<td>The developer can display a list of contents at the right side of the player.</td>
</tr>
</tbody></table>
<h4 id='use-of-this-document'>Use of this Document</h4>
<p>This document gives the following information:
1. How to apply PallyCon PC Web Player
2. Detailed explanation about the specifications of data exchanged between PallyCon PC Web Player and the Web server of the Service Site and about the scenarios of PallyCon PC Web Player.</p>
<h4 id='prerequisites'>Prerequisites</h4>
<p>You must prepare original contents and NCG-packaged contents to play them in PallyCon PC Web Player. </p>

<p>License is required to play DRM contents. A page for showing the content use rights required for creating a license must be created and registered in CP Admin. </p>

<p>Technical understanding and application for setting the data exchanged between PallyCon PC Web Player and the Web server of the Service Site are required.</p>
<h4 id='working-procedure'>Working Procedure</h4>
<p>If the above prerequisites are satisfied, you can perform the PallyCon PC Web Player interconnection work in the following procedure.</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td><strong>STEP1</strong></td>
<td>Carefully read this procedure at least once to understand the total flow.</td>
</tr>
<tr>
<td><strong>STEP2</strong></td>
<td>Build the Service Site and the Web Server of the Service Site in accordance with the specifications in the document.</td>
</tr>
<tr>
<td><strong>STEP3</strong></td>
<td>Start the interconnection test according to the service scenarios.</td>
</tr>
</tbody></table>
<h3 id='apis'>APIs</h3><h4 id='http-protocol-i-calling-the-pallycon-pc-web-player-page-post-method'>HTTP Protocol I: Calling the PallyCon PC Web Player Page (POST method)</h4>
<p>When user selects a content to play on a Web page of the Service Site, the PallyCon PC Web Player is called and plays the selected content. </p>

<p>The information of the content is created in JSON at the URL of the PallyCon PC Web Player Page, encoded with Base64 and transferred by POST. </p>

<p><em>Format</em></p>

<ul>
<li>Use <strong>UTF-8 String Encoding</strong></li>
<li>POST Method</li>
<li>URL: http://pcplayer.pallycon.com</li>
<li>Body<br>
<strong>Parameter I:</strong> <em>data</em> <strong>Value:</strong> <em>Base64Encoding(JSON DATA)String</em><br>
<strong>Parameter II:</strong> <em>lang</em> <strong>Value:</strong> Korean (KR), English (EN)<br>
<code class="prettyprint">http://pcplayer.pallycon.com?data=Base64Encoding(JSON DATA)String&amp;lang=KR</code></li>
</ul>

<p><em>Security</em></p>

<p>: Among the JSON data, DRM User ID, File URL, and Order ID must be encrypted with <strong>AES256</strong> before they are transferred. </p>

<p><em>Algorithm</em></p>

<ul>
<li>Algorithm : AES<br></li>
<li>Keysize : 256 bit<br></li>
<li>Mode : CBC</li>
</ul>

<p><em>Key, Initial vector</em></p>

<ul>
<li>Key: 32 bytes (Can be checked for each service site on the Cloud Admin page)</li>
<li>Initial vector: 16 byte  (Fixed value: <strong>123456890abcdef</strong>)</li>
</ul>

<p><em>Padding</em></p>

<ul>
<li>PKCS7 is used.</li>
</ul>
<h4 id='httphttps-protocol-ii-service-manager-url-post-method'>HTTP/HTTPs Protocol II: Service Manager URL (POST method)</h4>
<p>The communication between PallyCon PC Web Player and the Service Site is carried out through HTTP/HTTPs. The detailed data are created in the JSON format and delivered by POST. </p>

<p>The data exchanging functions through the communication between PallyCon PC Web Player and the Service Site are as follows: </p>

<ul>
<li>Bookmark</li>
<li>Transfer of progress and resume information </li>
</ul>
<h5 id='details'>DETAILS</h5>
<p>The HTTP/HTTPs protocol consists of the data requested by Pallycon PC Web Player to the Web server of the Service Site (REQUEST DATA) and the data responded by the Web server to PallyCon PC Web Player (RESPONSE DATA). </p>
<h6 id='request-data'>REQUEST DATA</h6>
<blockquote>
<p><strong>NOTE:</strong> The data exchange through the communication in PallyCon PC Web Player uses one URL (Service Manager URL). The Service Manager URL must be included in the JSON data that is handed over when the PallyCon PC Web Player page is called. </p>
</blockquote>

<p><em>Format</em></p>

<ul>
<li>Use <strong>UTF-8 String Encoding</strong></li>
<li>POST Method</li>
<li>URL: http(s)://Service manager URL</li>
<li>Body<br>
<strong>Parameter</strong>: <em>data</em><br>
<strong>Value</strong>: <em>Base64Encoding(JSON DATA)String</em></li>
</ul>

<p><code class="prettyprint">http(s)://Service_Manager_URL?data=Base64Encoding(JSON DATA)String</code></p>

<p><em>JSON DATA</em></p>

<p>: Because one URL must process four different data, a parameter for distinguishing two modes is provided in JSON data. </p>

<ul>
<li>Bookmark: <strong>{&ldquo;mode&rdquo;:&ldquo;bookmark&rdquo;,&hellip;}</strong></li>
<li>Transfer of progress and resume information: <strong>{&ldquo;mode&rdquo;:&ldquo;pc_lms&rdquo;,&hellip;}</strong></li>
</ul>
<h6 id='response-data'>RESPONSE DATA</h6>
<p><em>Format</em></p>

<ul>
<li><em>Base64Encoding(JSON DATA)String</em></li>
<li>Use <strong>UTF-8 String Encoding</strong></li>
</ul>

<p><em>JSON DATA</em></p>

<p>: Response to the request of PallyCon PC Web Player</p>
<h3 id='json-standards'>JSON Standards</h3>
<p>This section provides detailed descriptions about the specifications of JSON Data that was explained in APIs. Because the type of all the values used in JSON is <strong>String</strong>, you must enclose the value with <strong>quotation marks (&ldquo;&rdquo;)</strong>. </p>

<aside class="warning">To improve the readability of JSON Strings, each parameter has been separated by a line break. However, note that actual data do not allow line breaks or spaces between parameters.  
Every parameter of JSON data must be used.</aside>
<h4 id='pallycon-pc-web-player-call-standard'>PallyCon PC Web Player Call Standard</h4>
<p>The JSON Standard that must be set in the Body when PallyCon PC Web Player is called by POST in the Service Site is described below. </p>

<p>_[Settings to show the contents to be played by PallyCon PC Web Player and two contents in the PallyCon PC Web Player list]</p>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"site_id"</span><span class="p">:</span><span class="s2">"Demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user_id"</span><span class="p">:</span><span class="s2">"testuser"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"drm_user_id"</span><span class="p">:</span><span class="s2">"base64(aes(Demotestuser))"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"service_manager"</span><span class="p">:</span><span class="s2">"http://www.pallycon.com/service_manager.jsp"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"play_idx"</span><span class="p">:</span><span class="s2">"2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"continue_play_yn"</span><span class="p">:</span><span class="s2">"y"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"view_yn"</span><span class="p">:</span><span class="s2">"y"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"multiuser_chk_yn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"y"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"contents"</span><span class="p">:[{</span><span class="w">
        </span><span class="s2">"content_file"</span><span class="p">:</span><span class="s2">"http://www.pallycon.com/content/test_content1-1.mp4.ncg"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"content_name"</span><span class="p">:</span><span class="s2">"Pallycon Lecture 1-1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"content_type"</span><span class="p">:</span><span class="s2">"mp4"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"content_end_date"</span><span class="p">:</span><span class="s2">"2014-08-29"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_play_time"</span><span class="p">:</span><span class="s2">"2477"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"lms_percent"</span><span class="p">:</span><span class="s2">"82"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"lms_section"</span><span class="p">:</span><span class="s2">"0-20, 70-93"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"bookmark_time"</span><span class="p">:</span><span class="s2">"3601;5302;4621;"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"bookmark_memo"</span><span class="p">:</span><span class="s2">"Bookmark1;Bookmark2;Bookmark3;"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"course_status"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"152"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"list_idx"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"c_idx"</span><span class="p">:</span><span class="s2">"pallycon1-1"</span><span class="w">
    </span><span class="p">},{</span><span class="w">
        </span><span class="s2">"content_file"</span><span class="p">:</span><span class="s2">"http://www.pallycon.com/content/test_content1-2.mp4.ncg"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"content_name"</span><span class="p">:</span><span class="s2">"Pallycon Lecture 1-2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"content_type"</span><span class="p">:</span><span class="s2">"mp4"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"content_end_date"</span><span class="p">:</span><span class="s2">"2014-08-29"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_play_time"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"lms_percent"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"lms_section"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"bookmark_time"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"bookmark_memo"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"course_status"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"153"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"list_idx"</span><span class="p">:</span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"c_idx"</span><span class="p">:</span><span class="s2">"pallycon1-2"</span><span class="w">
    </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>site_id</em>
: This is a 4-byte fixed value that is issued to vendors and can be checked on the CP Admin page. Empty value is not allowed.</p>

<p><em>user_id</em>
: This is the user ID of the user logged in the Service Site. Empty value is not allowed.</p>

<p><em>drm_user_id</em>
: This user ID is transferred to the player during playback. For this value, &ldquo;site_id + user_id&rdquo; is encrypted with AES and encoded with base64. Empty value is not allowed.</p>

<ul>
<li>ex)site_id=DEMO, user_id=testuser </li>
<li>–&gt; base64encode(aes256(DEMOtestuser)) –&gt;320fjs890sdkljw83jf983==</li>
</ul>

<p><em>service_manager</em>
: This URL is required for interconnecting Bookmark and LMS information. Empty value is not allowed.</p>

<p><em>player_idx</em>
: This is the list index that a user wants to play in a list. Empty value is not allowed.</p>

<p><em>continue_play_yn</em>
: This value determines whether or not to permit resume. You must use lower case letters only (permitted: y, not permitted: n). Empty value is not allowed.</p>

<p><em>view_yn</em>
: This value determines whether or not to show the right-side menu in PallyCon PC Web Player. You must use lower case letters only (permitted: y, not permitted: n). Empty value is not allowed.</p>

<p><strong>Even if the side menu is not shown, you can add a bookmark by right-clicking your mouse.</strong></p>

<p><em>multiuser_chk_yn</em>
: This value determines whether or not to permit multiuser check. You must use lower case letters only (permitted: y, not permitted: n). Empty value is not allowed.</p>

<p><em>contents</em>
: This parameter has the contents in the list displayed in the right-side menu as an array. If you set the ‘view_yn’ parameter as not permitted, this value is not displayed even if there is a value. Empty value is not allowed.</p>

<p><em>content_file</em>
: This is the server URL at which the files used for streaming exist. Empty value is not allowed. The file URL is encrypted with AES and encoded with base64.</p>

<ul>
<li>ex)url=&ldquo;http://www.test.com/testcontent1.mp4.ncg&rdquo; </li>
<li>–&gt; base64encode(aes(url)) –&gt;320fjs89fd032ijfd902383jf983==</li>
</ul>

<p><em>content_name</em>
: This is the name of the content displayed in the right-side menu and the player. Empty value is not allowed.</p>

<p><em>content_end_date</em>
: This is the content display end date to be displayed in the right-side menu and player.</p>

<p><em>last_play_time</em>
: This the time when the content was played last and the player resumes to play the content from this point.</p>

<p><em>lms_percent</em>
: The parameter shows the progress of playing the content as a percent. The unit is omitted. Empty value is not allowed.</p>

<p><em>lms_section</em>
: This parameter shows the section that the user played.</p>

<p><strong>LMS Sections Standard</strong><br>
- &ldquo;Start:End,Start:End, …&rdquo;<br>
- example) &ldquo;0:20,40:100&rdquo; ⇒ Plays from 0 to 20 and from 40 to 100.</p>

<p><em>bookmark_time</em>
: bookmark time</p>

<p><em>bookmark_memo</em>
: bookmark memo</p>

<p><em>order_id</em>
: The order ID is encrypted with AES and encoded with base64.</p>

<ul>
<li>ex)order_id=&ldquo;352&rdquo; –&gt; base64encode(aes(order_id)) –&gt;320fjs383jf983==</li>
</ul>

<p><em>course_status</em>
: This is the progress of course registration status: 0=Not registered, 1=In course, 2=Completed</p>

<p><em>list_idx</em>
: list_idx</p>

<p><em>c_idx</em>
: c idx</p>
<h5 id='bookmark-standard'>Bookmark Standard</h5>
<p>This is the standard for adding, updating, and deleting bookmarks. Whenever bookmarks are changed, PallyCon PC Web Player sets all the bookmark information and transfers it to the server. Therefore, there is only one standard for adding, updating, and deleting. </p>
<h6 id='request-data'>REQUEST DATA</h6>
<p>This data is sent from PallyCon PC Web Player to the Web server of the Service Site. </p>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"mode"</span><span class="p">:</span><span class="s2">"bookmark"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user_id"</span><span class="p">:</span><span class="s2">"testuser"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"c_idx"</span><span class="p">:</span><span class="s2">"pallycon1-1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bookmark_time"</span><span class="p">:</span><span class="s2">"10;300;200;"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bookmark_memo"</span><span class="p">:</span><span class="s2">"test1;bookmark1;bookmark2;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>mode</em>
: mode</p>

<p><em>user_id</em>
: user id</p>

<p><em>c_idx</em>
: c idx</p>

<p><em>bookmark_time</em>
: bookmark time</p>

<p><em>bookmark_memo</em>
: bookmark memo</p>
<h6 id='response-data'>RESPONSE DATA</h6><pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"result"</span><span class="p">:</span><span class="s2">"y"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>result</em>
: result</p>
<h5 id='lms-standard'>LMS Standard</h5>
<p>When PallyCon PC Web Player stops playing, the section played by a user is transferred to the Web server of the Service Site. </p>
<h6 id='request-data'>REQUEST DATA</h6>
<p>This is the JSON data that is sent from PallyCon PC Web Player to the Service Site. </p>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"mode"</span><span class="p">:</span><span class="s2">"pc_lms"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user_id"</span><span class="p">:</span><span class="s2">"testuser"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"c_idx"</span><span class="p">:</span><span class="s2">"pallycon1-1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lms_percent"</span><span class="p">:</span><span class="s2">"50"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lms_section"</span><span class="p">:</span><span class="s2">"10:30,100:300,350:900"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_play_time"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">""</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>mode</em>
: mode</p>

<p><em>user_id</em>
: user_id</p>

<p><em>c_idx</em>
: c_idx</p>

<p><em>lms_percent</em>
: lms_percent</p>

<p><em>lms_section</em>
: lms section</p>

<p><em>last_play_time</em>
: last play time</p>

<p><em>status</em>
: status</p>
<h6 id='response-data'>RESPONSE DATA</h6>
<p>This is the response data to the requested data from the Web server of the Service Site. </p>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"result"</span><span class="p">:</span><span class="s2">"y"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>result</em>
: result</p>
<h3 id='apis-working-scenario'>APIs Working Scenario</h3><h4 id='service-scenario'>Service Scenario</h4>
<p>PallyCon PC Web Player interacts with the server through streaming service. This service has a very simple operation scenario because it is a streaming service. </p>
<h5 id='streaming-service-scenario'>Streaming Service Scenario</h5>
<p>The streaming service starts when the PallyCon PC Web Player Page is called by touching Play on a Web page of the Service Site. 
When you stop playing, the LMS information and the played time (seconds) until the stop is transferred to the Web server. 
When a user adds, updates, or deletes a bookmark, the player sends all the bookmark data that it has to the Web server. </p>
<h4 id='scenario-details'>Scenario Details</h4>
<p>This is a detailed explanation about the Streaming Service Scenario. This section provides detailed information about the scenario that must be written by developer. The process inside the player is not explained in detail here. </p>
<h5 id='lms-information-transfer'>LMS Information Transfer</h5>
<p>When PallyCon PC Web Player stops playing, the LMS information is set for the section played by a user and transferred to the Web server together with the last play time (sec). </p>
<h5 id='add-update-and-delete-bookmarks'>Add, Update, and Delete Bookmarks</h5>
<p>Users can add, update, or delete bookmarks in PallyCon PC Web Player. </p>

<p>Whenever the bookmark information is updated, PallyCon PC Web Player transfers all the bookmark data that it has to the Web server of the Service Site. </p>

<p><em>Add Bookmark</em> 
: When a user touches the Add Bookmark button, the bookmarks that were set at the time when the Add button was clicked are displayed in the list. The total bookmark data including the created bookmark data are transferred to the Web server of the Service Site. </p>

<p><em>Update Bookmark</em>
: A user can edit the bookmark details in the bookmark list, click the Update button. Then the total bookmark list including the modified bookmarks is transferred to the Web server of the Service Site. </p>

<p><em>Delete Bookmark</em>
: A user can click the Delete button for bookmarks in the bookmark list to delete them. Then the total bookmark list after the deletion is transferred to the Web server of the Service Site. </p>
<h3 id='revision-history'>Revision History</h3>
<p>This table describes the revisions of the Pallycon Player Interconnection Guide.</p>

<table><thead>
<tr>
<th style="text-align: left">Date</th>
<th style="text-align: left">Detail</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">2014.12.12</td>
<td style="text-align: left">Pallycon PC Web Player Interconnection Guide was produced</td>
</tr>
</tbody></table>

          <h1 id='rest-api-guide'>ReST API Guide</h1><h2 id='introduction'>Introduction</h2>
<p>PallyCon Service provides APIs that allow you to directly access the PallyCon Cloud Service Site to see and modify data. The APIs provided by PallyCon Service have the RESTful architecture. </p>

<p>You can use rich references and tools because they use the HTTP protocol standards. </p>

<ul>
<li>http://wikipedia.org/wiki/REST</li>
<li>http://wikipedia.org/wiki/HTTP</li>
<li>http://www.getpostman.com</li>
</ul>
<h3 id='who-should-use-39rest_api39'>Who should use &lsquo;REST_API&rsquo;?</h3>
<p>Vendors using PallyCon Service can access PallyCon CP Admin to perform various tasks such as setting account information, use information, and interconnection setting. However, vendors can also directly see the information through the API provided by PallyCon Service from their own site without accessing PallyCon CP Admin.</p>

<p>Or, in a service structure where one vendor supplies PallyCon Service to multiple subordinate vendors, you can use this API to directly access information about subordinate vendors and show the information to them. However, you can only manage vendors such as adding or deleting them through PallyCon CP Admin.  </p>
<h2 id='https-protocol'>HTTPs Protocol</h2><h3 id='request-data'>REQUEST DATA</h3>
<p>Vendors create request data to see contents in PallyCon Cloud Service Site. </p>

<p><em>Format</em></p>

<ul>
<li>API Server URL: https://tokyo.pallycon.com/api</li>
<li>Method: <em>Get (see), PUT (update)</em></li>
<li> <em>In GET method, data are entered as <strong>URI Query</strong>. In PUT method, data are entered as <strong>JSON String</strong> in Payload(Body).</em></li>
<li><em>UTF-8 Encoding</em> is used.</li>
<li> Setting the authorization field of HTTP Header: <em>Enter Site ID and Site Key</em> using <a href="http://wikipedia.org/wiki/Basic_access_authentication">basic authentication</a>.</li>
</ul>

<p><em>Site ID and Site Key input format</em>: <strong>&#39;SiteID:SiteKey&rsquo;</strong> is encoded with Base64.</p>
<h3 id='response-data'>RESPONSE DATA</h3>
<p>The response data to the request data are classified by <a href="http://wikipedia.org/wiki/HTTP_status_code">HTTP status code</a>. PallyCon Cloud Service Site processes the request data in a few ways. </p>

<table><thead>
<tr>
<th style="text-align: left">Status Code</th>
<th style="text-align: left">Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">200</td>
<td style="text-align: left">This code is generated when the request data has been normally processed.</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">This code is generated when the JSON syntax is violated.</td>
</tr>
<tr>
<td style="text-align: left">401</td>
<td style="text-align: left">This code is generated when the correct account information is not entered in the authorization field of HTTP Header or there is no permission.</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">This code is generated when there is no value to return, or a parameter in URI or JSON is incorrect.</td>
</tr>
<tr>
<td style="text-align: left">405</td>
<td style="text-align: left">This code is generated when the method is not supported.</td>
</tr>
</tbody></table>

<p><em>Format</em></p>

<ul>
<li><strong>JSON String</strong></li>
<li><strong>UTF-8 Encoding</strong> is used.</li>
</ul>

<p><em>JSON String</em>
: This syntax is used when there is information to send in the response data. </p>
<h2 id='standards'>Standards</h2>
<p>This document describes the standards for request data and response data with different URI paths depending on the queried data type. </p>

<p>If GET method is used for sending request data, data must be set in URI Query format. If PUT method is used, data must be set in JSON format in Payload. 
<aside class="notice"> Parameter can be omitted in the request data. However, if you use Parameter, you must enter a value. (<strong>Empty value is not allowed.</strong>)</aside></p>
<h3 id='accounts-strongaccountstrong'>ACCOUNTS <strong>(~/account)</strong></h3>
<p>Query or update the Site ID information.  </p>
<h4 id='request-data'>Request Data</h4>
<p><strong>GET method:</strong> Query the Site ID information in the authorization field of HTTP Header. 
<code class="prettyprint">https://tokyo.pallycon.com/api/my/account</code></p>

<ul>
<li>NO URI Query </li>
</ul>

<p><strong>PUT method:</strong> Update the Site ID information in the authorization field of HTTP Header with the JSON information in Payload. </p>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
</span><span class="s2">"service_url"</span><span class="p">:</span><span class="s2">"http://test.test.com"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"cid_issue_url"</span><span class="p">:</span><span class="s2">"http://test.test.com"</span><span class="p">,</span><span class="w">
</span><span class="s2">"content_usage_info_url"</span><span class="p">:</span><span class="s2">"http://test.test.com"</span><span class="p">,</span><span class="w">
</span><span class="s2">"pc_limit"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"pd_limit"</span><span class="p">:</span><span class="mi">1</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>service_url</em>
: Service URL, Web player authorization URL</p>

<p><em>cid_issue_url</em>
: Content ID issue page address</p>

<p><em>content_usage_info_url</em>
: Address of the page for showing content use information</p>

<p><em>pc_limit, pd_limit</em>
: Number of PCs and devices that users can register</p>
<h4 id='response-data'>Response Data</h4>
<p><strong>Result of the query for Site ID: <em>HTTP Status Code + JSON</em></strong></p>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"site_id"</span><span class="p">:</span><span class="s2">"DKE2"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"service_use"</span><span class="p">:</span><span class="s2">"U"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"service_url"</span><span class="p">:</span><span class="s2">"www.PallyCon.com"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"reg_date"</span><span class="p">:</span><span class="s2">"201408282156"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pack_key"</span><span class="p">:</span><span class="s2">"keidh2345erdfg32efs"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"site_key"</span><span class="p">:</span><span class="s2">"keidh2345erdfg32efs"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"web_player_key"</span><span class="p">:</span><span class="s2">"keidh2345erdfg32efs"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cid_issue_url"</span><span class="p">:</span><span class="s2">"http://test.test.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"content_usage_info_url"</span><span class="p">:</span><span class="s2">"http://test.test.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pc_limit"</span><span class="p">:</span><span class="mi">8</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pd_limit"</span><span class="p">:</span><span class="mi">3</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>site_id</em>
: A four-character ID for identifying a site </p>

<p><em>service_use</em>
: Whether or not to activate a service  </p>

<ul>
<li><strong>U</strong>: using </li>
<li><strong>F</strong>: free </li>
<li><strong>S</strong>: stopped</li>
</ul>

<p><em>service_url</em>
: Service URL and name</p>

<p><em>reg_date</em>
: Creation date. GMT standard (+0), in the format <strong>yyyyMMddHHmmss</strong></p>

<p><em>pack_key, site_key, web_player_key</em>
: Passwords to be entered in Packager, Gateway, and Web Player, respectively</p>
<h3 id='drm-content-strongpackstrong'>DRM Content <strong>(~/pack?~)</strong></h3>
<p>Query the DRM content in PallyCon Cloud Service Site. </p>
<h4 id='request-data'>Request Data</h4>
<p><strong>GET Method:</strong> Verify the Site ID in the authorization field of HTTP Header, and query the DRM content corresponding to the URI Query in the PallyCon Cloud Service Site.  </p>

<p><code class="prettyprint">https://tokyo.pallycon.com/api/my/pack?page=1&amp;size=2&amp;from=201409071209&amp;to=201409081522&amp;cid=3k12&amp;file_name=sky&amp;sorting=reg_date</code> </p>

<p><em>page, size</em>
: Page number and the number of columns to show once. The default value is ‘1’ for page and ‘20’ for size. The maximum size is 100. The defaults are set if Parameter is not used. </p>

<p><em>from, to</em>
: This is the query range, and the format is GMT standard (+0) &#39;yyyyMMddHHmmss&rsquo;.
 If only from or to parameter is used, the query range is unlimited from or to the given time. </p>

<p><em>cid, file_name</em>
: CID(32-byte) or file name to search</p>

<p><em>sorting</em>
: The default is ‘reg_date’. ‘cid’ or ‘file_name&rsquo; can be used as well.</p>
<h4 id='response-data'>Response Data</h4>
<p><strong>Query result of DRM contents: <em>HTTP Status Code + JSON</em></strong></p>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"count"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> 
        </span><span class="p">[{</span><span class="w">
            </span><span class="s2">"file_name"</span><span class="p">:</span><span class="s2">"fileName.mp4.ncg"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"cid"</span><span class="p">:</span><span class="s2">"def3dfa"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"cek"</span><span class="p">:</span><span class="s2">"erewer23sdfzchy"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"reg_date"</span><span class="p">:</span><span class="s2">"201408282158"</span><span class="w">
        </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>count</em>
: Total number of data to be searched</p>

<p><em>data</em>
: Used together with count. The actually requested data are in data as an array. </p>

<p><em>file_name</em>
: File name of the content</p>

<p><em>cid</em>
: Content ID (32-byte)</p>

<p><em>cek</em>
: Key of the content</p>

<p><em>reg_date</em>
: Creation date. GMT standard (+0), in the format <strong>yyyyMMddHHmmss</strong></p>
<h3 id='issued-license-info-stronglicensestrong'>Issued License Info <strong>(~/license?~)</strong></h3>
<p>Query the issued license information in the PallyCon Cloud Service Site. </p>
<h4 id='request-data'>Request Data</h4>
<p><strong>GET Method:</strong> Verify the Site ID in the authorization field of HTTP Header, and query the License information corresponding to the URI Query in the PallyCon Cloud Service Site.  </p>

<p><code class="prettyprint">https://tokyo.pallycon.com/api/my/license?page=1&amp;size=2&amp;from=201409071209&amp;to=201409081522&amp;status=success&amp;cid=3k12&amp;user_id=dese&amp;device_id=DKEOWK234KE&amp;device_model=iPhone&amp;sorting=reg_date</code></p>

<p><em>page, size</em>
: Page number and the number of columns to show once. The default value is ‘1’ for page and ‘20’ for size. The maximum size is 100. The defaults are set if Parameter is not used. </p>

<p><em>from, to</em>
: This is the query range, and the format is GMT standard (+0) &#39;yyyyMMddHHmmss&rsquo;.
If only from or to parameter is used, the query range is unlimited from or to the given time. </p>

<p><em>status</em>
: Result of license issuance: ‘success’ or ‘fail’. If Parameter is not used, the License is queried regardless of issuance. </p>

<p><em>cid, user_id, device_id</em>
: CID(32-byte), User_ID, or Device_ID to be searched</p>

<p><em>sorting</em>
: The default is ‘reg_date’. ‘cid’, ‘user_id’, or ‘device_id’ can be used as well.</p>
<h4 id='response-data'>Response Data</h4>
<p><strong>Query result of License information: <em>HTTP Status Code + JSON</em></strong></p>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"count"</span><span class="p">:</span><span class="s2">"144"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> 
        </span><span class="p">[{</span><span class="w">
            </span><span class="s2">"cid"</span><span class="p">:</span><span class="s2">"SDE3"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"user_id"</span><span class="p">:</span><span class="s2">"test"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"device_id"</span><span class="p">:</span><span class="s2">"DFEJHKJGYHBJ123"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"device_model"</span><span class="p">:</span><span class="s2">"iPhone"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"ro_start"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"ro_end"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"ro_cnt"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"reg_date"</span><span class="p">:</span><span class="s2">""</span><span class="w">
        </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>count</em>
: The sum of all data when multiple data are returned.</p>

<p><em>data</em>
: Used together with count. The actually requested data are in data as an array. </p>

<p><em>cid</em>
: Content ID(32 byte)</p>

<p><em>status</em>
: Result of license issuance: ‘success’ or ‘fail’.</p>

<p><em>user_id</em>
: ID of the user</p>

<p><em>device_id, device_model</em>
: ID and model of the user device</p>

<p><em>ro_start, ro_end</em>
: This is copyright information (start date and end date during which play is possible), and the format is GMT standard (+0) &#39;yyyyMMddHHmmss&rsquo;.</p>

<p><em>ro_cnt</em>
: Play count</p>

<p><em>reg_date</em>
: Creation date which is written in GMT standard (+0). The format is ‘yyyyMMddHHmmss’.</p>
<h3 id='device-strongdevicestrong'>Device <strong>(~/device?~)</strong></h3>
<p>Query the device information registered in the PallyCon Cloud Service Site. </p>
<h4 id='request-data'>Request Data</h4>
<p><strong>GET Method:</strong> Verify the Site ID in the authorization field of HTTP Header, and query the License information corresponding to the URI Query in the PallyCon Cloud Service Site.  </p>

<p><code class="prettyprint">https://tokyo.pallycon.com/api/my/device?page=1&amp;size=2&amp;from=201409071209&amp;to=201409081522&amp;user_id=dese&amp;device_id=DKEOWK234KE&amp;device_model=iPhone&amp;sorting=reg_date</code></p>

<p><em>page, size</em>
: Page number and the number of columns to show once. The default value is ‘1’ for page and ‘20’ for size. The maximum size is 100. The defaults are set if Parameter is not used. </p>

<p><em>from, to</em>
: This is the query range, and the format is GMT standard (+0) &#39;yyyyMMddHHmmss&rsquo;.
If only from or to parameter is used, the query range is unlimited from or to the given time. </p>

<p><em>user_id, device_id, device_model</em>
: User_ID, Device_ID, or Device_Model to be searched</p>

<p><em>sorting</em>
: The default is ‘reg_date’. ‘&#39;user_id’, ‘device_id’, or ‘device_model’ can be used as well.</p>
<h4 id='response-data'>Response Data</h4>
<p><strong>Query result of the registered device information: <em>HTTP Status Code + JSON</em></strong></p>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"count"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> 
        </span><span class="p">[{</span><span class="w">
            </span><span class="s2">"user_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"device_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"device_model"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"reg_date"</span><span class="p">:</span><span class="s2">""</span><span class="w">
        </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>count</em>
: The sum of all data when multiple data are returned.</p>

<p><em>data</em>
: Used together with count. The actually requested data are in data as an array.</p>

<p><em>user_id</em>
: ID of the user</p>

<p><em>device_id, device_model</em>
: ID and model of the user device</p>

<p><em>reg_date</em>
: Creation date which is written in GMT standard (+0). The format is ‘yyyyMMddHHmmss’.</p>
<h3 id='statistics-strongstatisticsstrong'>Statistics <strong>(~/statistics?~)</strong></h3>
<p>This is used to see the general service status. </p>
<h4 id='request-data'>Request Data</h4>
<p><strong>GET Method:</strong> Verify the Site ID in the authorization field of HTTP Header, and query the service status information corresponding to the URI Query of the Site ID in the PallyCon Cloud Service Site.  </p>

<p><code class="prettyprint">https://tokyo.pallycon.com/api/my/statistics?from=201409071209&amp;to=201409081522</code> </p>

<p><em>from, to</em>
: This is the query range, and the format is GMT standard (+0) &#39;yyyyMMddHHmmss&rsquo;.
If only from or to parameter is used, the query range is unlimited from or to the given time. </p>
<h4 id='response-data'>Response Data</h4>
<p><strong>Query result of service status information: <em>HTTP Status Code + JSON</em></strong></p>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"license_count"</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="s2">"device_count"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user_count"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pc_count"</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ios_count"</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="s2">"android_count"</span><span class="p">:</span><span class="mi">7</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>license_count, use_device_count, user_count, pc_count, ios_count, android_count</em>
: Number of issued licenses, number of registered devices, number of users, number of PCs, number of iOS devices, and number of Android devices</p>
<h2 id='revision-history'>Revision History</h2>
<p>This table describes the revisions of the REST API Guide.</p>

<table><thead>
<tr>
<th style="text-align: left">Date</th>
<th style="text-align: left">Detail</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">2014.08.27</td>
<td style="text-align: left">REST API Guide was created</td>
</tr>
</tbody></table>

<p><img alt="footer" src="../images/footer.png" /></p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
